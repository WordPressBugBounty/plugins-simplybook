"use strict";(globalThis.webpackChunksimplybook_app=globalThis.webpackChunksimplybook_app||[]).push([[167],{8800:(e,t,r)=>{r.d(t,{f:()=>i});var n,a=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),i=function(e){function t(r,n){for(var a=[],i=2;i<arguments.length;i++)a[i-2]=arguments[i];var o=e.apply(this,function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([r],a,!1))||this;return o.name="DataError",o.fields=n,Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return a(t,e),t}(Error)},4576:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(9592),a=r(7723),i=r(8800),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},s=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const c=function(){function e(e){this.route=null,this.getMethodHeaders={"X-WP-NONCE":n.Dv},this.postMethodHeaders={"Content-Type":"application/json",Accept:"application/json","X-WP-NONCE":n.Dv},this.payload={nonce:n.St},e&&(this.route=n.n_+e)}return e.prototype.get=function(){return s(this,void 0,void 0,(function(){var e,t;return l(this,(function(r){switch(r.label){case 0:if(!this.route)throw new Error((0,a.__)("Route is not set","simplybook"));return[4,fetch(this.route,{method:"GET",headers:this.getMethodHeaders})];case 1:return(e=r.sent()).ok?[3,3]:[4,e.json()];case 2:return t=r.sent(),[2,this.handleError(t)];case 3:return[2,e.json()]}}))}))},e.prototype.post=function(e){return s(this,void 0,void 0,(function(){var t,r;return l(this,(function(i){switch(i.label){case 0:if(!this.route)throw new Error((0,a.__)("Route is not set","simplybook"));return this.payload.payloadWasSet||this.setPayload(e),[4,fetch(this.route,{method:"POST",headers:this.postMethodHeaders,body:JSON.stringify(o(o({},this.payload),{nonce:n.St}))})];case 1:return t=i.sent(),this.resetPayload(),t.ok?[3,3]:[4,t.json()];case 2:return r=i.sent(),[2,this.handleError(r)];case 3:return[2,t.json()]}}))}))},e.prototype.put=function(e){return s(this,void 0,void 0,(function(){var t,r,n;return l(this,(function(i){switch(i.label){case 0:if(!this.route)throw new Error((0,a.__)("Route is not set. Use setRoute() before calling put()","simplybook"));return this.payload.payloadWasSet||this.setPayload(e),t=o(o({},this.payload),e&&o({},e)),[4,fetch(this.route,{method:"PUT",headers:this.postMethodHeaders,body:JSON.stringify(o({},t))})];case 1:return r=i.sent(),this.resetPayload(),r.ok?[3,3]:[4,r.json()];case 2:return n=i.sent(),[2,this.handleError(n)];case 3:return[2,r.json()]}}))}))},e.prototype.delete=function(){return s(this,void 0,void 0,(function(){var e,t,r;return l(this,(function(i){switch(i.label){case 0:if(!this.route)throw new Error((0,a.__)("Route is not set. Use setRoute() before calling delete()","simplybook"));return e={nonce:n.St},[4,fetch(this.route,{method:"DELETE",headers:this.postMethodHeaders,body:JSON.stringify(e)})];case 1:return(t=i.sent()).ok?[3,3]:[4,t.json()];case 2:return r=i.sent(),[2,this.handleError(r)];case 3:return[2,t.json()]}}))}))},e.prototype.setRoute=function(e){return this.route=n.n_+e,this},e.prototype.setHeaders=function(e,t){return"get"===t?(this.getMethodHeaders=o(o({},this.getMethodHeaders),e),this):"post"===t?(this.postMethodHeaders=o(o({},this.postMethodHeaders),e),this):this},e.prototype.setPayload=function(e){if(!1===this.isValidPayload(e))throw new Error((0,a.__)("Payload must be a non-empty object.","simplybook"));return this.payload=o(o(o({},this.payload),e),{payloadWasSet:!0}),this},e.prototype.isValidPayload=function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return(t===Object.prototype||t===Array.prototype||null===t)&&(Array.isArray(e)?e.length>0:Object.keys(e).length>0)},e.prototype.resetPayload=function(){this.payload={nonce:n.St}},e.prototype.handleError=function(e){var t,r=(0,a.__)("An unknown error occurred. Please try again.","simplybook");if("internal_server_error"===(null==e?void 0:e.code))throw new Error(r);throw"string"==typeof e&&(r=e),(null==e?void 0:e.message)&&(r=e.message),(null==e?void 0:e.error)&&(r=e.error),(null==e?void 0:e.errors)&&(t=e.errors),new i.f(r,t)},e}()},1888:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(790),a=r(4164),i=r(9681),o=r(1577),s=r(1314),l=function(e){var t=e.className,r=void 0===t?"":t,l=e.children,c=e.link,d=void 0===c?"":c,u=e.linkClassName,v=void 0===u?"":u,m=e.btnVariant,p=e.disabled,f=void 0!==p&&p,h=e.target,g=e.loginLink,y=void 0===g?"":g,b=(e.icon,e.iconName),w=void 0===b?"":b,x=e.iconSize,_=void 0===x?"":x,E=e.iconClass,k=void 0===E?"":E,N=e.iconStyle,S=e.onClick,j=e.reverseIcon,C=void 0!==j&&j,A=(0,s.A)().fetchLinkData,P=(0,a.A)("flex items-center justify-center rounded-full transition-all duration-200 px-3 py-1",{"bg-primary text-white hover:bg-primary-dark !p-4 text-base":"primary"==m,"bg-primary text-white hover:bg-primary-dark ":"primary-small"==m,"bg-secondary text-white hover:bg-secondary-dark !p-4 text-base":"secondary"==m,"bg-secondary text-white hover:bg-secondary-dark ":"secondary-small"==m,"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary !p-4 text-base":"tertiary"==m,"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary":"tertiary-small"==m,"border-2 border-black bg-transparent !p-4 text-base":"ghost"==m,"border-2 border-black bg-transparent":"ghost-small"==m,"bg-primary text-white rounded-md hover:bg-primary-dark !p-4 text-base":"square"==m,"rounded-md text-white":"square-small"==m,"border-2 border-primary text-primary rounded-md !p-4 text-base":"square-ghost"==m,"border-2 border-primary text-primary rounded-md":"square-ghost-small"==m}),O=f?"opacity-50 cursor-not-allowed pointer-events-none":"",T=C?"flex-row-reverse":"flex-row";return r.length>0&&(P=P+" "+r),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.N_,{className:(0,a.A)(v,"text-sm font-semibold",O),to:d,onClick:y?function(e){return function(e,t){e.preventDefault(),A().then((function(e){var r,n=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.simplybook_external_login_url;if(n){var a="".concat(n,"/").concat(t,"/");if(n.includes("by-hash")){var i=new URL(n);i.searchParams.append("back_url","/".concat(t,"/")),a=i.toString()}window.open(a,"_blank"),window.focus()}else console.error("No link found in response")})).catch((function(e){console.error("Error fetching login URL:",e)}))}(e,y)}:S,target:h,children:(0,n.jsxs)("div",{className:(0,a.A)(P,T,r),children:[w&&(0,n.jsx)(o.A,{className:(0,a.A)(k,{"me-2":!C,"ms-2":C}),name:w,size:_,style:N}),l]})})})};l.displayName="ButtonLink";const c=l},4251:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(790),a=r(1409),i=r(1577);const o=function(){function e(e,t){this.type=t,this.message=e}return e.prototype.setType=function(e){return this.type=e,this},e.prototype.setMessage=function(e){return this.message=e,this},e.prototype.render=function(){"success"===this.type&&(0,a.oR)(this.createToast(this.message,"circle-check","green")),"error"===this.type&&(0,a.oR)(this.createToast(this.message,"circle-xmark","red")),"warning"===this.type&&(0,a.oR)(this.createToast(this.message,"warning","var(--color-warning)")),this.type||console.error("ToastNotice: No type has been defined, aborted."),this.cleanUp()},e.prototype.createToast=function(e,t,r){return e&&t&&r?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(i.A,{className:"h-5",name:t,color:r,size:"2x"}),(0,n.jsx)("p",{className:"text-black font-normal text-[0.85rem] m-0",children:e})]})}):(0,n.jsx)(n.Fragment,{})},e.prototype.cleanUp=function(){this.message="No notice message has been defined",this.type="warning"},e}()},5946:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(790),a=r(1577),i=r(7008);const o=function(e){var t=e.message,r=e.type,o=e.iconType,s=void 0===o?"":o,l=e.iconColor,c=void 0===l?"":l;if(!s||!c)switch(r){case"warning":s="warning-circle",c="var(--color-yellow-500)";break;case"error":s="warning-circle",c="var(--color-red-500)";break;default:s="info-circle",c="var(--color-black-900)"}return t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.A,{name:s,color:c,className:"tooltip-icon ms-2","data-tooltip-id":"field-tooltip","data-tooltip-content":t,"aria-hidden":"false","aria-label":t}),(0,n.jsx)(i.m_,{id:"field-tooltip",place:"bottom",openEvents:{mouseover:!0,focus:!0,click:!0}})]}):null}},7967:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(790),a=r(5920),i=r(1609);var o=r(5946),s=(0,i.memo)((function(e){var t=e.label,r=e.context,i=e.tooltip,s=e.reverseLabel,l=void 0!==s&&s,c=e.className,d=void 0===c?"":c,u=e.inputId,v=e.required,m=void 0!==v&&v,p=e.type,f=void 0===p?"text":p,h=e.children,g=e.fieldState,y=function(e){var t="pattern"==e.type,r="invalid-field";return"required"==e.type&&(r+="-required"),t&&(r+="-regex"),r},b=["flex flex-col",d,"mb-4",(null==g?void 0:g.error)?y(null==g?void 0:g.error):""].filter(Boolean).join(" "),w=["flex flex-col w-full",l?"flex-col-reverse":""].filter(Boolean).join(" ");return(0,n.jsxs)("div",{className:b,children:[(0,n.jsxs)("div",{className:w,children:["checkbox"===f&&h,t&&(0,n.jsxs)(a.b,{className:"cursor-pointer pb-1 font-medium text-black text-label ",htmlFor:u,children:[t,m,i&&(0,n.jsx)(o.A,{message:null==i?void 0:i.message,type:null==i?void 0:i.type})]}),"checkbox"!==f&&h]}),r&&(0,n.jsx)("p",{className:"mt-2 text-xs font-light text-gray-600",children:r})]})}));s.displayName="FieldWrapper";const l=s},8908:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(790),a=r(4164),i=function(e){var t=e.className,r=void 0===t?"":t,i=e.type,o=e.children,s=e.onClick,l=e.btnVariant,c=void 0===l?"primary":l,d=e.disabled,u=void 0!==d&&d,v=(0,a.$)("flex items-center justify-center rounded-full transition-all duration-200 px-3 py-1 text-sm",{"bg-primary text-white hover:bg-primary-dark !p-4 text-base":"primary"==c,"bg-primary text-white hover:bg-primary-dark ":"primary-small"==c,"bg-secondary text-white hover:bg-secondary-dark !p-4 text-base":"secondary"==c,"bg-secondary text-white hover:bg-secondary-dark ":"secondary-small"==c,"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary !p-4 text-base":"tertiary"==c,"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary":"tertiary-small"==c,"border-2 border-black bg-transparent !p-4 text-base":"ghost"==c,"border-2 border-black bg-transparent":"ghost-small"==c,"border-2 border-inherit bg-primary text-white rounded-md text-base":"square"==c,"border-2 border-primary text-primary rounded-md text-base":"square-ghost"==c,"rounded-md text-white":"square-small"==c,"border-2 border-primary text-primary rounded-md":"square-ghost-small"==c,"opacity-50 cursor-not-allowed":u,"cursor-pointer":!u});return r.length>0&&(v=v+" "+r),(0,n.jsx)("button",{type:i,onClick:s,className:v,disabled:u,children:o})};i.displayName="ButtonInput";const o=i},359:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(790),a=r(1609),i=r.n(a),o=r(4164),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},l=function(e){var t=e.name,r=e.placeholder,a=e.type,l=e.className,c=e.clickToSelect,d=void 0!==c&&c,u=e.disabled,v=void 0!==u&&u,m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["name","placeholder","type","className","clickToSelect","disabled"]),p=i().useState("Copy"),f=p[0],h=p[1],g=i().useState(!1),y=g[0],b=g[1],w=function(){var e=document.querySelector(".copy-button");document.querySelector(".copy-input"),"string"==typeof m.value&&navigator.clipboard.writeText(m.value).then((function(){if(!e)throw new Error("Button not found");h("Copied!"),b(!0),setTimeout((function(){h("Copy"),b(!1)}),1e3)})).catch((function(e){console.error("Error copying text: ",e)}))},x=v?"bg-gray-200 border-gray-200 text-black cursor-not-allowed":"";return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"w-full relative",children:[(0,n.jsx)("input",s({name:t,placeholder:r,type:a,onClick:d?w:void 0,className:(0,o.A)("input-base copy-input transition-[border-color] duration-300 ease-in-out "+x+" "+l),disabled:v},m)),d&&f&&(0,n.jsx)("button",{onClick:d?w:void 0,type:"button","aria-label":t,className:(0,o.A)(y?"bg-green-100 text-green-600":"bg-gray-50 text-gray-600","absolute cursor-pointer right-[0.5rem] top-5.5 transform -translate-y-1/2 rounded-md px-2 py-1 text-xs font-semibold copy-button"),children:f})]})})};l.displayName="TextInput";const c=l},9964:(e,t,r)=>{r.d(t,{V:()=>h,r:()=>f});var n=r(790),a=r(1609),i=r(8468),o=r.n(i),s=r(9866),l=r(8981),c=r(7723),d=r(4251),u=r(8800),v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},v.apply(this,arguments)},m=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},p=(0,a.createContext)(null),f=function(){var e=(0,a.useContext)(p);if(!e)throw Error("useCrudContext can only be used by child components inside the CrudContextProvider");return e},h=function(e){var t=e.children,r=(0,a.useReducer)(g,w),i=r[0],o=r[1],m=(0,l.A)(),f=m.getServices,h=m.createService,y=m.updateService,x=m.deleteService,_=m.isLoading,E=(0,s.A)(),k=E.getProviders,N=E.createProvider,S=E.updateProvider,j=E.deleteProvider,C=E.isLoading,A=new d.A;return(0,a.useEffect)((function(){o({dispatchType:"loadingChanged",change:{isLoading:C||_}})}),[C,_]),(0,a.useEffect)((function(){switch(i.itemType){case"service":if(i.servicesHasUnsavedChanges)break;f().then((function(e){var t=e.data.data,r=t.flatMap((function(e){return e.is_visible?e.id:[]}));return o({dispatchType:"servicesUpdated",change:{services:t,currentlyVisibleServices:r}}),t})).catch((function(e){console.error(e),o({dispatchType:"generalError",change:{generalError:e.message}})}));break;case"provider":if(i.providersHasUnsavedChanges)break;k().then((function(e){var t=e.data.data,r=t.flatMap((function(e){return e.is_visible?e.id:[]}));return o({dispatchType:"providersUpdated",change:{providers:t,currentlyVisibleProviders:r}}),t})).catch((function(e){console.error(e),o({dispatchType:"generalError",change:{generalError:e.message}})}))}}),[i.itemType]),(0,n.jsx)(p.Provider,{value:{crudState:i,dispatch:o,handleDeletingItem:function(e){var t,r,n;switch(i.itemType){case"provider":t=j,r=(0,c.__)("Are you sure you want to delete this Service Provider?","simplybook"),n="providerDeleted";break;case"service":t=x,r=(0,c.__)("Are you sure you want to delete this Service?","simplybook"),n="serviceDeleted";break;default:throw new Error("ItemType not set")}window.confirm(r)&&t(e).then((function(){o({dispatchType:n,change:{item:{id:e}}})})).catch((function(e){console.error("Error on deletion:",e)}))},saveItems:function(){var e,t,r,n,a;switch(i.generalError&&o({dispatchType:"generalError",change:{generalError:""}}),i.itemType){case"provider":e=i.unsavedProviders,t=N,r=S,n={create:(0,c.__)("Error creating Service Provider","simplybook"),update:(0,c.__)("Error updating Service Provider","simplybook")},a={create:"providerCreatedSuccessfully",update:"providerUpdatedSuccessfully"};break;case"service":e=i.unsavedServices,t=h,r=y,n={create:(0,c.__)("Error creating Service","simplybook"),update:(0,c.__)("Error updating Service","simplybook")},a={create:"serviceCreatedSuccessfully",update:"serviceUpdatedSuccessfully"};break;default:throw new Error("ItemType not set")}if(0===Object.keys(e).length)throw o({dispatchType:"savingChanged",change:{isSaving:!1}}),new Error("Nothing to save");for(var s=function(e,t,r){var a,s;throw void 0===t&&(t=""),console.error("Error on save:",e),e.fields?o({dispatchType:"errorsOnFields",change:v(v({},"provider"===i.itemType&&{providerErrors:(a={},a[r]=e.fields,a)}),"service"===i.itemType&&{serviceErrors:(s={},s[r]=e.fields,s)})}):o({dispatchType:"generalError",change:{generalError:e.message}}),A.setMessage(t?n[t]:(0,c.__)("An error occurred trying to save your changes","simplybook")).setType("error").render(),o({dispatchType:"savingChanged",change:{isSaving:!1}}),e},l=function(e){if(e.name||s(new u.f("No name provided",{name:[(0,c.__)("Name is a required field.","simplybook")]}),"",e.id),!e.id)throw new Error("No ID provided");var n=b(v({},e));"new"===e.id?t(n).then((function(e){o({dispatchType:a.create,change:{item:e.data}}),A.setMessage(e.message).setType("success").render(),o({dispatchType:"savingChanged",change:{isSaving:!1}})})).catch((function(e){s(e,"create","new")})):r({id:e.id,data:n}).then((function(e){o({dispatchType:a.update,change:{item:e.data}}),A.setMessage(e.message).setType("success").render(),o({dispatchType:"savingChanged",change:{isSaving:!1}})})).catch((function(t){s(t,"update",e.id)}))},d=0,m=e;d<m.length;d++)l(m[d])}},children:t})},g=function(e,t){var r,n,a,i,s,l,c,d,u,p,f,h,g,b,x,_,E,k,N,S,j,_x,C,A,P,O,T,R,q,F,I;switch(t.dispatchType){case"crudItemTypeChanged":return v(v({},e),{itemType:t.change.itemType?t.change.itemType:null});case"unsavedChangesToProviders":if(!t.change.item)throw new Error("Item to update not set");var L=e.providers?e.providers.find((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)})):null,V=e.unsavedProviders?e.unsavedProviders.find((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)})):null,U=v(v({},V||L),t.change.item),D=o().isEqual(L,U),H=null!==(a=e.currentlyVisibleProviders)&&void 0!==a?a:[],B=Object.keys(t.change.item).includes("is_visible");if(D){var M=null!==(s=null===(i=e.unsavedProviders)||void 0===i?void 0:i.filter((function(e){return U.id!=e.id})))&&void 0!==s?s:[];return v(v(v({},e),{unsavedProviders:M,providersHasUnsavedChanges:!!M.length&&M.length>0}),B&&{currentlyVisibleProviders:y(Number(U.id),H,!!U.is_visible)})}var $=e.unsavedProviders?e.unsavedProviders.findIndex((function(e){return e.id===U.id})):-1,K=e.unsavedProviders?m([],e.unsavedProviders,!0):[];return-1!=$?K[$]=U:K.push(U),v(v(v({},e),{unsavedProviders:K,providersHasUnsavedChanges:!0}),B&&{currentlyVisibleProviders:y(Number(U.id),H,!!U.is_visible)});case"unsavedChangesToServices":if(!t.change.item)throw new Error("Item to update not set");var Q=e.services?e.services.find((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)})):null,z=e.unsavedServices?e.unsavedServices.find((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)})):null,W=v(v({},z||Q),t.change.item),G=o().isEqual(Q,W),J=null!==(l=e.currentlyVisibleServices)&&void 0!==l?l:[];if(B=Object.keys(t.change.item).includes("is_visible"),G){var Y=null!==(d=null===(c=e.unsavedServices)||void 0===c?void 0:c.filter((function(e){return W.id!=e.id})))&&void 0!==d?d:[];return v(v(v({},e),{unsavedServices:Y,servicesHasUnsavedChanges:!!Y.length&&Y.length>0}),B&&{currentlyVisibleServices:y(Number(W.id),J,!!W.is_visible)})}var Z=e.unsavedServices?e.unsavedServices.findIndex((function(e){return e.id===W.id})):-1,X=e.unsavedServices?m([],e.unsavedServices,!0):[];return-1!=Z?X[Z]=W:X.push(W),v(v(v({},e),{unsavedServices:X,servicesHasUnsavedChanges:!0}),B&&{currentlyVisibleServices:y(Number(W.id),J,!!W.is_visible)});case"providersUpdated":if(!t.change.providers)throw Error("Providers not set");return v(v(v({},e),{providers:t.change.providers}),t.change.currentlyVisibleProviders&&{currentlyVisibleProviders:t.change.currentlyVisibleProviders});case"servicesUpdated":if(!t.change.services)throw Error("Services not set");return v(v(v({},e),{services:t.change.services}),t.change.currentlyVisibleServices&&{currentlyVisibleServices:t.change.currentlyVisibleServices});case"isCreatingNewChanged":if(!t.change.isCreatingNewProvider&&!t.change.isCreatingNewService)throw new Error("No creating new state provided");return v(v(v({},e),"provider"===e.itemType&&{isCreatingNewProvider:t.change.isCreatingNewProvider}),"service"===e.itemType&&{isCreatingNewService:t.change.isCreatingNewService});case"cancelAllUnsavedChanges":var ee=void 0;switch(e.itemType){case"provider":ee=null===(u=e.providers)||void 0===u?void 0:u.filter((function(e){return e.is_visible})).map((function(e){return e.id}));break;case"service":ee=null===(p=e.services)||void 0===p?void 0:p.filter((function(e){return e.is_visible})).map((function(e){return e.id}));break;default:throw new Error("ItemType not set")}return v(v(v(v({},e),{generalError:""}),"provider"===e.itemType&&{providersHasUnsavedChanges:!1,currentlyVisibleProviders:ee,unsavedProviders:[],isCreatingNewProvider:!1,providerErrors:{}}),"service"===e.itemType&&{servicesHasUnsavedChanges:!1,currentlyVisibleServices:ee,unsavedServices:[],isCreatingNewService:!1,serviceErrors:{}});case"providerUpdatedSuccessfully":if(!t.change.item)throw new Error("No provider provided");var te=e.unsavedProviders?null===(f=e.unsavedProviders)||void 0===f?void 0:f.filter((function(e){var r;return e.id!==(null===(r=t.change.item)||void 0===r?void 0:r.id)})):[],re=e.providers?e.providers.map((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)?v(v({},e),t.change.item):e})):[],ne=re.flatMap((function(e){return e.is_visible?e.id:[]}));return v(v({},e),{providers:re,unsavedProviders:te,providersHasUnsavedChanges:0!==te.length,currentlyVisibleProviders:ne});case"providerCreatedSuccessfully":if(!t.change.item)throw new Error("No provider provided");te=e.unsavedProviders?null===(h=e.unsavedProviders)||void 0===h?void 0:h.filter((function(e){return"new"!==e.id})):[];var ae=null!==(g=e.providers)&&void 0!==g?g:[];return ne=(re=m(m([],ae,!0),[t.change.item],!1)).flatMap((function(e){return e.is_visible?e.id:[]})),v(v({},e),{isCreatingNewProvider:!1,providers:re,unsavedProviders:te,providersHasUnsavedChanges:0!==te.length,currentlyVisibleProviders:ne});case"serviceUpdatedSuccessfully":if(!t.change.item)throw new Error("No service provided");var ie=e.unsavedServices?null===(b=e.unsavedServices)||void 0===b?void 0:b.filter((function(e){var r;return e.id!==(null===(r=t.change.item)||void 0===r?void 0:r.id)})):[],oe=e.services?e.services.map((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)?v(v({},e),t.change.item):e})):[],se=oe.flatMap((function(e){return e.is_visible?e.id:[]}));return v(v({},e),{services:oe,unsavedServices:ie,servicesHasUnsavedChanges:0!==ie.length,currentlyVisibleServices:se});case"serviceCreatedSuccessfully":if(!t.change.item)throw new Error("No new service provided");ie=e.unsavedServices?null===(x=e.unsavedServices)||void 0===x?void 0:x.filter((function(e){return"new"!==e.id})):[];var le=null!==(_=e.services)&&void 0!==_?_:[];return se=(oe=m(m([],le,!0),[t.change.item],!1)).flatMap((function(e){return e.is_visible?e.id:[]})),v(v({},e),{isCreatingNewService:!1,services:oe,unsavedServices:ie,servicesHasUnsavedChanges:0!==ie.length,currentlyVisibleServices:se});case"createNewCanceled":var ce=void 0;switch(e.itemType){case"provider":ce=null!==(k=null===(E=e.unsavedProviders)||void 0===E?void 0:E.filter((function(e){return"new"!=e.id})))&&void 0!==k?k:[];break;case"service":ce=null!==(S=null===(N=e.unsavedServices)||void 0===N?void 0:N.filter((function(e){return"new"!=e.id})))&&void 0!==S?S:[];break;default:throw new Error("ItemType not set")}return v(v(v({},e),"provider"===e.itemType&&{providersHasUnsavedChanges:!!ce.length&&ce.length>0,isCreatingNewProvider:!1,unsavedProviders:ce}),"service"===e.itemType&&{servicesHasUnsavedChanges:!!ce.length&&ce.length>0,isCreatingNewService:!1,unsavedProviders:ce});case"providerDeleted":if(!t.change.item)throw new Error("Item to delete not set");var de=e.providers?e.providers.filter((function(e){var r;return e.id!==(null===(r=t.change.item)||void 0===r?void 0:r.id)})):[],ue=null!==(_x=null===(j=e.unsavedProviders)||void 0===j?void 0:j.filter((function(e){var r;return e.id!=(null===(r=t.change.item)||void 0===r?void 0:r.id)})))&&void 0!==_x?_x:[],ve=!!t.change.item&&(null===(C=e.currentlyVisibleProviders)||void 0===C?void 0:C.includes(t.change.item.id));return H=null!==(A=e.currentlyVisibleProviders)&&void 0!==A?A:[],v(v(v({},e),{providers:de,unsavedProviders:ue,servicesHasUnsavedChanges:!!ue.length&&ue.length>0}),ve&&{currentlyVisibleProviders:H.filter((function(e){var r;return e!=(null===(r=t.change.item)||void 0===r?void 0:r.id)}))});case"serviceDeleted":if(!t.change.item)throw new Error("Item to delete not set");var me=e.services?e.services.filter((function(e){var r;return e.id!==(null===(r=t.change.item)||void 0===r?void 0:r.id)})):[],pe=null!==(O=null===(P=e.unsavedServices)||void 0===P?void 0:P.filter((function(e){var r;return e.id!=(null===(r=t.change.item)||void 0===r?void 0:r.id)})))&&void 0!==O?O:[];return ve=!!t.change.item&&(null===(T=e.currentlyVisibleServices)||void 0===T?void 0:T.includes(t.change.item.id)),J=null!==(R=e.currentlyVisibleServices)&&void 0!==R?R:[],v(v(v({},e),{services:me,unsavedServices:pe,servicesHasUnsavedChanges:!!pe.length&&pe.length>0}),ve&&{currentlyVisibleServices:J.filter((function(e){var r;return e!=(null===(r=t.change.item)||void 0===r?void 0:r.id)}))});case"errorsOnFields":if(!t.change.providerErrors&&!t.change.serviceErrors)throw new Error("No errors provided ");var fe=void 0,he=void 0,ge=void 0;switch(e.itemType){case"provider":fe=e.providerErrors,he=t.change.providerErrors,ge=t.change.providerErrors&&Object.keys(t.change.providerErrors)[0];break;case"service":fe=e.serviceErrors,he=t.change.serviceErrors,ge=t.change.serviceErrors&&Object.keys(t.change.serviceErrors)[0];break;default:throw new Error("ItemType not set")}var ye=ge&&fe?fe[ge]:null,be=v(v({},ye),ge&&he&&v({},he[ge])),we=v(v({},fe),ge&&((r={})[ge]=v({},be),r));return v(v(v({},e),"provider"===e.itemType&&{providerErrors:v({},we)}),"service"===e.itemType&&{serviceErrors:v({},we)});case"generalError":if("string"!=typeof t.change.generalError)throw new Error("No error provided");return v(v({},e),{generalError:t.change.generalError});case"clearErrorsForField":if(!t.change.item)throw new Error("No item provided");var xe=Object.keys(t.change.item).find((function(e){return"id"!==e}));if(!xe)throw new Error("No field provided");fe="provider"===e.itemType?e.providerErrors:e.serviceErrors;var _e=(null===(q=t.change.item)||void 0===q?void 0:q.id)&&fe?fe[t.change.item.id]:null;return _e&&xe&&delete _e[xe],we=v(v({},fe),t.change.item.id&&_e&&((n={})[t.change.item.id]=_e,n)),_e&&0===Object.keys(_e).length&&delete we[t.change.item.id],v(v(v({},e),"provider"===e.itemType&&{providerErrors:v({},we)}),"service"===e.itemType&&{serviceErrors:v({},we)});case"clearAllErrorsForItem":if(!t.change.item)throw new Error("No item provided");return delete(ye="provider"===e.itemType?null!==(F=e.providerErrors)&&void 0!==F?F:{}:null!==(I=e.serviceErrors)&&void 0!==I?I:{})[t.change.item.id],v(v(v(v({},e),{generalError:""}),"provider"===e.itemType&&{providerErrors:v({},ye)}),"service"===e.itemType&&{serviceErrors:v({},ye)});case"loadingChanged":if(void 0===t.change.isLoading)throw new Error("isLoading not set");return v(v({},e),{isLoading:t.change.isLoading});case"savingChanged":if(void 0===t.change.isSaving)throw new Error("isLoading not set");return v(v({},e),{isSaving:t.change.isSaving});case"reset":return w;default:throw new Error("Unknown action: "+t.dispatchType)}},y=function(e,t,r){var n,a=t.includes(e);switch(r){case!0:a||t.push(e),n=t;break;case!1:a&&(t=null==t?void 0:t.filter((function(t){return t!==e}))),n=t}return n},b=function(e){var t;return v(v(v(v(v({name:e.name,is_visible:null===(t=e.is_visible)||void 0===t||t},e.id&&"new"!==e.id&&{id:e.id}),e.qty&&{qty:Math.max(Number(e.qty)||1,1)}),e.email&&{email:e.email||""}),e.phone&&{phone:e.phone||""}),e.duration&&{duration:e.duration})},w={itemType:null,item:null,unsavedProviders:[],unsavedServices:[],providerErrors:{},serviceErrors:{},currentlyVisibleProviders:[],currentlyVisibleServices:[],isLoading:!1,isSaving:!1,servicesHasUnsavedChanges:!1,providersHasUnsavedChanges:!1,isCreatingNewProvider:!1,isCreatingNewService:!1,generalError:""}},5591:(e,t,r)=>{r.d(t,{p:()=>u,E:()=>d});var n=r(790),a=r(1609),i=r(9270),o=r(4576);var s=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},l={activeNotifications:[],getNotification:function(){},triggerNotification:function(){return!1},triggerNotificationById:function(){return!1},getAllNotifications:function(){return!1}},c=(0,a.createContext)(l),d=function(){return(0,a.useContext)(c)},u=function(e){var t=e.children,r=function(){var e,t="get_notices",r=new o.A,n=(0,i.I)({queryKey:[t],queryFn:function(){return r.setRoute(t).get()},staleTime:3e5}),a=n.data,s=n.isLoading,l=n.error;return null!==l&&console.error("Error fetching notices: ",l.message),{allNotices:null==a?void 0:a.data,isLoading:s,hasError:null!==l,message:null!==(e=null==a?void 0:a.message)&&void 0!==e?e:null==l?void 0:l.message}}(),l=r.allNotices,d=r.isLoading,u=(0,a.useState)([]),v=u[0],m=u[1];(0,a.useEffect)((function(){if(l){var e=l.filter((function(e){return e.active}));e.length>0&&m((function(t){var r=e.filter((function(e){return!t.some((function(t){return t.id===e.id}))}));return s(s([],t,!0),r,!0)}))}}),[l]);var p=function(e){return l.find((function(t){return t.id===e}))},f=function(e){m((function(t){return t.some((function(t){return t.id===e.id}))?t:s(s([],t,!0),[e],!1)}))};if(!d)return(0,n.jsx)(c.Provider,{value:{activeNotifications:v,getNotification:p,triggerNotification:f,triggerNotificationById:function(e){var t=p(e);if(!t)return console.warn('Notification "'.concat(e,'" not found'));f(t)},getAllNotifications:function(){return v}},children:t})}},2001:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(7665),a=r(9270),i=r(7097),o=r(4576),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},l=function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const d=function(e){var t,r,d,u,v,m,p,f=new o.A(e),h=(0,n.jE)(),g=(0,a.I)({queryKey:[e],queryFn:function(){return f.get()},staleTime:3e5,retry:1}),y=g.refetch,b=g.isLoading,w=g.error,x=g.data,_=(0,i.n)({mutationFn:function(e){return f.post(e)},onSuccess:function(){h.invalidateQueries({queryKey:[e]})}}),E=(0,i.n)({mutationFn:function(t){return l(void 0,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,f.setRoute("".concat(e,"/").concat(t.id)).put(t.data)];case 1:return[2,r.sent()]}}))}))},onMutate:function(t){return l(void 0,void 0,void 0,(function(){var r;return c(this,(function(n){switch(n.label){case 0:return[4,h.cancelQueries({queryKey:[e]})];case 1:return n.sent(),r=h.getQueryData([e]),h.setQueryData([e],(function(e){return(null==e?void 0:e.data)?s(s({},e),{data:e.data.map((function(e){return e.id===t.id?s(s({},e),t.data):e}))}):e})),[2,{previousData:r}]}}))}))},onError:function(t,r,n){(null==n?void 0:n.previousData)&&h.setQueryData([e],n.previousData)},onSettled:function(){h.invalidateQueries({queryKey:[e]})}}),k=(0,i.n)({mutationFn:function(t){return f.setRoute("".concat(e,"/").concat(t)).delete()},onSuccess:function(){h.invalidateQueries({queryKey:[e]})}});return{data:null!==(t=null==x?void 0:x.data)&&void 0!==t?t:[],dataFetched:!b&&!w,isLoading:null!=b&&b,error:null!=w?w:null,get:y,create:_.mutateAsync,update:E.mutateAsync,delete:k.mutateAsync,isCreating:null!==(r=_.isPending)&&void 0!==r&&r,isUpdating:null!==(d=E.isPending)&&void 0!==d&&d,isDeleting:null!==(u=k.isPending)&&void 0!==u&&u,createError:null!==(v=_.error)&&void 0!==v?v:null,updateError:null!==(m=E.error)&&void 0!==m?m:null,deleteError:null!==(p=k.error)&&void 0!==p?p:null}}},1314:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(7665),a=r(9270),i=r(4576),o={data:{simplybook_external_login_url:""}};const s=function(){var e=(0,n.jE)(),t="get_login_url",r=new i.A(t),s=(0,a.I)({queryKey:[t],queryFn:function(){return r.get()},staleTime:36e5,retry:0,enabled:!1,initialData:o,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return{loginData:s.data,fetchLinkData:function(){return r=void 0,n=void 0,i=function(){var r;return function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(n){switch(n.label){case 0:return[4,s.refetch()];case 1:return r=n.sent(),e.setQueryData([t],null==r?void 0:r.data),[2,null==r?void 0:r.data]}}))},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function s(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(o,s)}l((i=i.apply(r,n||[])).next())}));var r,n,a,i}}}},9866:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(1609),a=r(2001),i=r(5591);const o=function(){var e,t,r,o,s,l,c,d,u,v,m,p=(0,a.A)("providers"),f=(0,i.E)().triggerNotificationById;return(0,n.useEffect)((function(){var e;p.dataFetched&&0===(null===(e=p.data)||void 0===e?void 0:e.length)&&f("add_mandatory_provider")}),[p.dataFetched,null===(e=p.data)||void 0===e?void 0:e.length]),(0,n.useEffect)((function(){p.error&&console.error("Error fetching providers: ",p.error.message)}),[p.error]),{providers:null!==(t=p.data)&&void 0!==t?t:[],providersFetched:null!==(r=p.dataFetched)&&void 0!==r&&r,isLoading:null!==(o=p.isLoading)&&void 0!==o&&o,error:null!==(s=p.error)&&void 0!==s?s:null,getProviders:p.get,createProvider:p.create,updateProvider:p.update,deleteProvider:p.delete,isCreating:null!==(l=p.isCreating)&&void 0!==l&&l,isUpdating:null!==(c=p.isUpdating)&&void 0!==c&&c,isDeleting:null!==(d=p.isDeleting)&&void 0!==d&&d,createError:null!==(u=p.createError)&&void 0!==u?u:null,updateError:null!==(v=p.updateError)&&void 0!==v?v:null,deleteError:null!==(m=p.deleteError)&&void 0!==m?m:null}}},8981:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(1609),a=r(2001),i=r(5591);const o=function(){var e,t,r,o,s,l,c,d,u,v,m,p=(0,a.A)("services"),f=(0,i.E)().triggerNotificationById;return(0,n.useEffect)((function(){var e;p.dataFetched&&0===(null===(e=p.data)||void 0===e?void 0:e.length)&&f("add_mandatory_service")}),[p.dataFetched,null===(e=p.data)||void 0===e?void 0:e.length]),(0,n.useEffect)((function(){p.error&&console.error("Error fetching services: ",p.error.message)}),[p.error]),{services:null!==(t=p.data)&&void 0!==t?t:[],servicesFetched:null!==(r=p.dataFetched)&&void 0!==r&&r,isLoading:null!==(o=p.isLoading)&&void 0!==o&&o,error:null!==(s=p.error)&&void 0!==s?s:null,getServices:p.get,createService:p.create,updateService:p.update,deleteService:p.delete,isCreating:null!==(l=p.isCreating)&&void 0!==l&&l,isUpdating:null!==(c=p.isUpdating)&&void 0!==c&&c,isDeleting:null!==(d=p.isDeleting)&&void 0!==d&&d,createError:null!==(u=p.createError)&&void 0!==u?u:null,updateError:null!==(v=p.updateError)&&void 0!==v?v:null,deleteError:null!==(m=p.deleteError)&&void 0!==m?m:null}}},3042:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(9270),a=r(8846),i=r(4576),o=r(5591);const s=function(){var e,t,r,s,l,c,d,u,v,m,p,f,h,g,y,b,w,x,_,E,k,_x,N,S,j,C,A,P,O,T,R,q,F,I=(0,a.A)().onboardingCompleted,L=(0,o.E)().triggerNotificationById,V="subscription_data",U=new i.A(V),D=(0,n.I)({queryKey:[V],queryFn:function(){return U.get()},staleTime:36e5,retry:0,enabled:!!I}),H=D.isLoading,B=D.error,M=D.data,$=D.refetch;return null!==B&&console.error("Error fetching subscription data: ",B.message),0===(null===(r=null===(t=null===(e=null==M?void 0:M.data)||void 0===e?void 0:e.limits)||void 0===t?void 0:t.provider_limit)||void 0===r?void 0:r.rest)&&L("maxed_out_providers"),{subscription:null==M?void 0:M.data,subscriptionPlan:null!==(l=null===(s=null==M?void 0:M.data)||void 0===s?void 0:s.subscription_name)&&void 0!==l?l:"",expiresIn:null!==(d=null===(c=null==M?void 0:M.data)||void 0===c?void 0:c.expire_in)&&void 0!==d?d:0,isExpired:null!==(v=null===(u=null==M?void 0:M.data)||void 0===u?void 0:u.is_expired)&&void 0!==v&&v,smsRemaining:null!==(h=null===(f=null===(p=null===(m=null==M?void 0:M.data)||void 0===m?void 0:m.limits)||void 0===p?void 0:p.sms_limit)||void 0===f?void 0:f.rest)&&void 0!==h?h:0,smsTotal:null!==(w=null===(b=null===(y=null===(g=null==M?void 0:M.data)||void 0===g?void 0:g.limits)||void 0===y?void 0:y.sms_limit)||void 0===b?void 0:b.total)&&void 0!==w?w:0,bookingsRemaining:null!==(k=null===(E=null===(_=null===(x=null==M?void 0:M.data)||void 0===x?void 0:x.limits)||void 0===_?void 0:_.sheduler_limit)||void 0===E?void 0:E.rest)&&void 0!==k?k:0,bookingsTotal:null!==(j=null===(S=null===(N=null===(_x=null==M?void 0:M.data)||void 0===_x?void 0:_x.limits)||void 0===N?void 0:N.sheduler_limit)||void 0===S?void 0:S.total)&&void 0!==j?j:0,providersRemaining:null!==(O=null===(P=null===(A=null===(C=null==M?void 0:M.data)||void 0===C?void 0:C.limits)||void 0===A?void 0:A.provider_limit)||void 0===P?void 0:P.rest)&&void 0!==O?O:0,providersTotal:null!==(F=null===(q=null===(R=null===(T=null==M?void 0:M.data)||void 0===T?void 0:T.limits)||void 0===R?void 0:R.provider_limit)||void 0===q?void 0:q.total)&&void 0!==F?F:0,getSubscriptionData:$,isLoading:H,hasError:null!==B}}},9592:(e,t,r)=>{r.d(t,{A2:()=>d,Dv:()=>a,G$:()=>c,St:()=>n,TS:()=>i,Y:()=>m,e8:()=>l,iI:()=>v,n_:()=>o,u9:()=>s,yi:()=>u});const n=simplybook.nonce,a=simplybook.x_wp_nonce,i=simplybook.rest_namespace+"/"+simplybook.rest_version+"/",o=simplybook.rest_url+simplybook.rest_namespace+"/"+simplybook.rest_version+"/",s=p("rest_url"),l=(p("ajax_url"),simplybook.simplybook_domains),c="Other",d=simplybook.recaptcha?.site_key||"",u=simplybook.recaptcha?.script_url||"",v=simplybook.recaptcha?.google_privacy_policy_url||"",m=simplybook.recaptcha?.google_terms_url||"";function p(e){let t=simplybook[e];return"https:"!==window.location.protocol||t.includes("https://")||(t=t.replace("http://","https://")),t}},1793:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(9592);const a=()=>n.u9.includes("?")?"&":"?"},5204:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(1455),a=r.n(n);var i=r(1793);var o=r(9592);const s=async(e,t="POST",r={})=>{const n={path:e,method:t,data:r};n.path=o.TS+n.path+(0,i.A)()+"&token="+Math.random().toString(36).substring(2,7),n.data={...r,nonce:o.St},"GET"===t&&console.log("the request method is not adjusted for GET requests yet. ");try{return await(async(e,t="POST",r={})=>{const n={path:e,method:t,data:r};return await a()(n)})(n.path,n.method,n.data)}catch(e){((e,t)=>{console.error(`API Error at ${t}:`,e.message||e)})(e,n.path)}}},4705:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(1728),a=r(1609),i=r.n(a),o=r(8846),s=r(7723);const l=()=>{const e=(0,n.c)(21),[t,r]=(0,a.useState)(0),{onboardingCompleted:l}=(0,o.A)(),[c,d]=(0,a.useState)(!1),[u,v]=(0,a.useState)(0);let m,p,f;e[0]!==u||e[1]!==l?(m=()=>{const e=setInterval((()=>{r((t=>{let r=t+.3333333333333333;return r>90&&!l&&(d(!0),r=5,v(u+1)),u>5&&!l&&(r=100),r>=100?(clearInterval(e),d(!1),100):r}))}),100);return()=>clearInterval(e)},e[0]=u,e[1]=l,e[2]=m):m=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3],(0,a.useEffect)(m,p),e[4]===Symbol.for("react.memo_cache_sentinel")?(f=window.location.href.includes("onboarding"),e[4]=f):f=e[4];const h=f,g=h?"animate-pulse":"";let y,b,w,x,_,E,k,N,S,j;return e[5]!==t?(y=h&&i().createElement("div",{className:"w-full"},i().createElement("div",{className:"w-full h-1 bg-gray-200 rounded-t-lg overflow-hidden"},i().createElement("div",{className:"h-full bg-blue-500 transition-all duration-100",style:{width:`${t}%`}}))),e[5]=t,e[6]=y):y=e[6],e[7]!==u||e[8]!==c?(b=h&&i().createElement(i().Fragment,null,u<=5&&i().createElement(i().Fragment,null,!c&&i().createElement("p",null,(0,s.__)("Please wait while your registration is being processed. This usually takes about 30 seconds.","simplybook")),c&&i().createElement("p",null,(0,s.__)("This is taking a bit longer than expected. Please wait while we retry a few times.","simplybook"))),u>5&&i().createElement("p",null,(0,s.__)("We're sorry, but it seems there is a problem with your registration. Please try again later.","simplybook"))),e[7]=u,e[8]=c,e[9]=b):b=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(w=!h&&i().createElement("p",null,(0,s.__)("Please complete the onboarding first to register your account.","simplybook")),e[10]=w):w=e[10],e[11]!==b?(x=i().createElement("div",{className:"text-gray-400 text-center p-3  bg-gray-100"},b,w),e[11]=b,e[12]=x):x=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(_=i().createElement("div",{className:"p-4"},i().createElement("div",{className:"text-center h-40"},i().createElement("div",{className:"w-full h-full bg-gray-100 rounded-md"}))),e[13]=_):_=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(E=i().createElement("h4",{className:"text-gray-700 font-bold mb-4"},i().createElement("div",{className:"h-6 bg-gray-100 rounded-md"})),e[14]=E):E=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(k=i().createElement("div",{className:"grid grid-cols-3 gap-3"},i().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),i().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),i().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),i().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),i().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),i().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"})),e[15]=k):k=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(N=i().createElement("span",{className:"inline-block w-3 h-3 rounded-full bg-gray-100"}),e[16]=N):N=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(S=i().createElement("div",{className:"p-4 border-t"},E,k,i().createElement("div",{className:"text-gray-500 text-sm mt-3"},N," - ",i().createElement("span",{className:"font-medium"}))),e[17]=S):S=e[17],e[18]!==y||e[19]!==x?(j=i().createElement("div",{className:"w-full max-w-md bg-white shadow-md mt-5 "+g},y,x,_,S),e[18]=y,e[19]=x,e[20]=j):j=e[20],j};var c=r(3775),d=r(9270),u=r(5204);const v=e=>{const t=(0,n.c)(12),{primary:r,secondary:i,active:s,onboardingCompleted:v}=e,{createPreviewWidget:p}=(0,c.A)(),{startPolling:f,pollingEnabled:h,pollingSuccess:g}=(()=>{const e=(0,n.c)(20),{onboardingCompleted:t,setOnboardingCompleted:r}=(0,o.A)(),[i,s]=(0,a.useState)(!t);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={status:"waiting"},e[0]=l):l=e[0];const[c,v]=(0,a.useState)(l),[m,p]=(0,a.useState)(0),[f,h]=(0,a.useState)(!1);let g,y,b;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=["registration_callback_status"],y={status:"waiting"},e[1]=g,e[2]=y):(g=e[1],y=e[2]),e[3]!==m||e[4]!==i||e[5]!==c||e[6]!==r?(b=async()=>{if(!i)return console.log("Polling disabled"),c;p(m+1);const e=await(0,u.A)("check_registration_callback_status","POST",{data:{status:"waiting"}});return v(e.data),"completed"===e.data.status&&(s(!1),h(!0),r(!0)),m>100&&s(!1),e.data},e[3]=m,e[4]=i,e[5]=c,e[6]=r,e[7]=b):b=e[7];const w=!!i;let x,_,E;e[8]!==i?(x=e=>!!i&&3e3,e[8]=i,e[9]=x):x=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(_=e=>{s(!1)},e[10]=_):_=e[10],e[11]!==b||e[12]!==w||e[13]!==x?(E={queryKey:g,initialData:y,queryFn:b,enabled:w,refetchInterval:x,onError:_},e[11]=b,e[12]=w,e[13]=x,e[14]=E):E=e[14];const{isFetching:k}=(0,d.I)(E);let N,S;return e[15]===Symbol.for("react.memo_cache_sentinel")?(N=()=>s(!0),e[15]=N):N=e[15],e[16]!==k||e[17]!==i||e[18]!==f?(S={startPolling:N,pollingEnabled:i,isPolling:k,pollingSuccess:f},e[16]=k,e[17]=i,e[18]=f,e[19]=S):S=e[19],S})();let y,b,w;t[0]!==h||t[1]!==f?(y=()=>{!1===h&&f()},t[0]=h,t[1]=f,t[2]=y):y=t[2],t[3]!==v?(b=[v],t[3]=v,t[4]=b):b=t[4],(0,a.useEffect)(y,b),t[5]!==s||t[6]!==g||t[7]!==r||t[8]!==i?(w=[r,i,s,g],t[5]=s,t[6]=g,t[7]=r,t[8]=i,t[9]=w):w=t[9],(0,a.useEffect)((()=>{g&&x(r,i,s)}),w);const x=(e,t,r)=>{p({onboarding:!0,primary:e,secondary:t,active:r}).then(m)};if(!v){let e;return t[10]===Symbol.for("react.memo_cache_sentinel")?(e=React.createElement(l,null),t[10]=e):e=t[10],e}let _;return t[11]===Symbol.for("react.memo_cache_sentinel")?(_=React.createElement("div",{id:"sbw_z0hg2i_calendar",className:"w-full",style:{height:"1200px"}}),t[11]=_):_=t[11],_};function m(e){const t=document.createElement("script");t.id="simplybook-preview-widget-script",t.innerHTML=e.data.widget,document.body.appendChild(t),document.dispatchEvent(new CustomEvent("loadSimplyBookPreviewWidget"))}},1577:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(1728),a=r(982),i=r(6188),o=r(9656),s=r(7875);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}const c={"calendar-day":o.isQ,"calendar-week":o.aXh,retry:o.buE,"square-arrow-up-right":i.fLi,"circle-check":i.QRE,"circle-xmark":i.bnw,warning:i.JAe,spinner:i.z1G,"chevron-down":i.Jt$,"chevron-up":i.w2A,check:i.e68,"info-circle":o.iW_,"warning-circle":o.lEd,times:i.GRI,trophy:i.iHh,"user-group":i.USd,eye:i.pS3,bullhorn:i.e4L,support:o.Bwz,clock:i.a$,circle:i.GEE,cart:i._Ro,"target-blank":i.Ju_,youtube:s.B4m,tips:i.Jew},d=e=>{const t=(0,n.c)(18);let r,o,s,d,u;t[0]!==e?(({name:r,color:s,size:d,className:u,...o}=e),t[0]=e,t[1]=r,t[2]=o,t[3]=s,t[4]=d,t[5]=u):(r=t[1],o=t[2],s=t[3],d=t[4],u=t[5]);const v=void 0===s?"black":s,m=void 0===d?"1x":d,p=void 0===u?"":u;let f=c[r];f||(console.warn(`Icon "${r}" does not exist in iconMap.`),f=i.GEE);const h="spinner"===r;let g,y,b;return t[6]!==r?(g="spinner"===r&&{animationDuration:"2s"},t[6]=r,t[7]=g):g=t[7],t[8]!==v||t[9]!==g?(y={color:v,...g},t[8]=v,t[9]=g,t[10]=y):y=t[10],t[11]!==p||t[12]!==f||t[13]!==o||t[14]!==m||t[15]!==h||t[16]!==y?(b=React.createElement(a.g,l({icon:f,size:m,spin:h,className:p,style:y},o)),t[11]=p,t[12]=f,t[13]=o,t[14]=m,t[15]=h,t[16]=y,t[17]=b):b=t[17],b}},323:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(1728),a=r(1609),i=r.n(a),o=r(1577),s=r(4164),l=r(8908),c=r(8846),d=r(1314);const u=e=>{const t=(0,n.c)(27),{className:r,page:a,isButton:u,size:v,btnVariant:f,children:h,disabled:g,iconName:y,iconSize:b,iconClass:w,iconStyle:x,onClick:_,reverseIcon:E}=e,k=void 0===r?"":r,N=void 0===a?"":a,S=void 0!==u&&u,j=void 0===v?"md":v,C=void 0===f?"primary":f,A=void 0===h?"":h,P=void 0!==g&&g,O=void 0===y?"":y,T=void 0===b?"":b,R=void 0===w?"":w,q=void 0===x?"":x,F=void 0===_?m:_,I=void 0!==E&&E,{fetchLinkData:L}=(0,d.A)();let V;(0,c.A)(),t[0]!==L||t[1]!==F?(V=(e,t)=>{e.preventDefault(),F(e),L().then((e=>{const r=e?.data.simplybook_external_login_url;if(!r)return void console.error("No link found in response");let n=`${r}/${t}/`;if(r.includes("by-hash")){const e=new URL(r);e.searchParams.append("back_url",`/${t}/`),n=e.toString()}window.open(n,"_blank"),window.focus()})).catch(p)},t[0]=L,t[1]=F,t[2]=V):V=t[2];const U=V,D=`${P?"pointer-events-none opacity-50 cursor-not-allowed":""}${k} `;if(S){let e,r;return t[3]!==U||t[4]!==N?(e=e=>U(e,N),t[3]=U,t[4]=N,t[5]=e):e=t[5],t[6]!==C||t[7]!==A||t[8]!==D||t[9]!==P||t[10]!==j||t[11]!==e?(r=i().createElement(l.A,{disabled:P,label:A,onClick:e,className:D,btnVarisant:C,size:j},A),t[6]=C,t[7]=A,t[8]=D,t[9]=P,t[10]=j,t[11]=e,t[12]=r):r=t[12],r}let H,B,M;return t[13]!==U||t[14]!==N?(H=e=>U(e,N),t[13]=U,t[14]=N,t[15]=H):H=t[15],t[16]!==R||t[17]!==O||t[18]!==T||t[19]!==q||t[20]!==I?(B=O.length>0&&i().createElement(o.A,{className:(0,s.A)(R,{"me-2":!I,"ms-2":I}),name:O,size:T,style:q}),t[16]=R,t[17]=O,t[18]=T,t[19]=q,t[20]=I,t[21]=B):B=t[21],t[22]!==A||t[23]!==D||t[24]!==H||t[25]!==B?(M=i().createElement("a",{href:"#",className:D,onClick:H},A,B),t[22]=A,t[23]=D,t[24]=H,t[25]=B,t[26]=M):M=t[26],M};u.displayName="LoginLink";const v=u;function m(){}function p(e){console.error("Error fetching login URL:",e)}},296:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(1728),a=r(9681);const i=e=>{const t=(0,n.c)(12),{error:r,errorHeading:i,resolve:o}=e;let s;t[0]!==o?(s=void 0===o?{}:o,t[0]=o,t[1]=s):s=t[1];const l=s;if(!r)return null;let c,d,u,v;return t[2]!==i?(c=React.createElement("strong",{className:"font-bold"},i),t[2]=i,t[3]=c):c=t[3],t[4]!==r?(d=React.createElement("p",{className:"m-0 mt-2"},r),t[4]=r,t[5]=d):d=t[5],t[6]!==l?(u=l&&React.createElement(a.N_,{className:"mt-2 text-red-500 underline block",onClick:l?.callback},l?.label),t[6]=l,t[7]=u):u=t[7],t[8]!==c||t[9]!==d||t[10]!==u?(v=React.createElement("div",{className:"animate-floatIn mt-4 bg-red-100  border-red-500 text-red-500 border-2 px-4 py-3 rounded relative shadow-lg",role:"alert"},c,d,u),t[8]=c,t[9]=d,t[10]=u,t[11]=v):v=t[11],v}},332:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(1728),a=r(1609),i=r(8908),o=r(7967),s=r(1577);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}const c=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(22);let a,c,d,u,v,m,p;if(r[0]!==e){const{setting:t,label:n,help:i,context:o,className:s,button:l,showLoader:f,...h}=e;v=n,u=i,d=o,c=s,a=l,p=f,m=h,r[0]=e,r[1]=a,r[2]=c,r[3]=d,r[4]=u,r[5]=v,r[6]=m,r[7]=p}else a=r[1],c=r[2],d=r[3],u=r[4],v=r[5],m=r[6],p=r[7];const f=a?.btnVariant,h=a?.disabled,g=a?.onClick;let y,b,w;return r[8]!==p?(y=p&&React.createElement(s.A,{color:"white",name:"spinner",size:"1x",className:"me-2"}),r[8]=p,r[9]=y):y=r[9],r[10]!==v||r[11]!==m||r[12]!==f||r[13]!==h||r[14]!==g||r[15]!==y?(b=React.createElement(i.A,l({btnVariant:f,disabled:h,onClick:g},m),y,v),r[10]=v,r[11]=m,r[12]=f,r[13]=h,r[14]=g,r[15]=y,r[16]=b):b=r[16],r[17]!==c||r[18]!==d||r[19]!==u||r[20]!==b?(w=React.createElement(o.A,{label:"",help:u,context:d,className:c,inputId:""},b),r[17]=c,r[18]=d,r[19]=u,r[20]=b,r[21]=w):w=r[21],w}));c.displayName="ButtonField";const d=c},7581:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(1728),a=r(1609),i=r(790),o=r(5189),s=(0,a.forwardRef)((function(e,t){var r=e.colorValue,n=void 0===r?"#ffffff":r,s=e.onChangeComplete,l=(0,a.useState)(n),c=l[0],d=l[1];return(0,i.jsx)("div",{ref:t,children:(0,i.jsx)(o.xk,{color:c,onChange:function(e){d(e.hex)},onChangeComplete:function(e){return null==s?void 0:s(e.hex)},disableAlpha:!0})})}));s.displayName="ColorPicker";const l=s;var c=r(7967),d=r(9922);const u=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(38);let i,o,s,u,v,p,f,h,g;if(r[0]!==e){const{setting:t,fieldState:n,label:a,help:l,context:c,className:d,onChange:m,defaultValue:y,setColorOnClose:b,...w}=e;g=t,s=n,v=a,u=l,o=c,i=d,p=m,h=b,f=w,r[0]=e,r[1]=i,r[2]=o,r[3]=s,r[4]=u,r[5]=v,r[6]=p,r[7]=f,r[8]=h,r[9]=g}else i=r[1],o=r[2],s=r[3],u=r[4],v=r[5],p=r[6],f=r[7],h=r[8],g=r[9];const[y,b]=(0,a.useState)(g.value||g.default),[w,x]=(0,a.useState)(!1);let _,E,k;r[10]!==y||r[11]!==f.value?(_=()=>{f.value&&f.value!==y&&b(f.value)},r[10]=y,r[11]=f.value,r[12]=_):_=r[12],r[13]!==f.value?(E=[f.value],r[13]=f.value,r[14]=E):E=r[14],(0,a.useEffect)(_,E),r[15]!==y||r[16]!==h?(k=e=>{x(e),!e&&h&&h(y)},r[15]=y,r[16]=h,r[17]=k):k=r[17];const N=k;let S;r[18]!==p?(S=(e,t)=>{b(e),p&&p(e)},r[18]=p,r[19]=S):S=r[19];const j=S;let C;r[20]!==y||r[21]!==j||r[22]!==N||r[23]!==w||r[24]!==g.disabled?(C=e=>{const{label:t}=e,r=g.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer";return React.createElement(React.Fragment,null,React.createElement(d.bL,{open:w,onOpenChange:g.disabled?m:N},React.createElement(d.l9,{className:"p-1 w-full bg-transparent rounded-md border border-gray-400 min-w-[140px] text-base"},React.createElement("div",{className:r+" text-start xl:whitespace-wrap xl:text-center min-w-5 flex p-1.5 gap-3.5 items-center"},React.createElement("div",{className:"rounded-full min-w-5 h-5 border border-gray-300",style:{backgroundColor:y}}),t)),React.createElement(d.ZL,null,React.createElement(d.UC,{style:{zIndex:11}},React.createElement(l,{colorValue:y,onChangeComplete:j})))))},r[20]=y,r[21]=j,r[22]=N,r[23]=w,r[24]=g.disabled,r[25]=C):C=r[25];const A=C,P=s?.error?.message;let O,T;return r[26]!==A||r[27]!==v||r[28]!==g?(O=React.createElement(A,{setting:g,label:v}),r[26]=A,r[27]=v,r[28]=g,r[29]=O):O=r[29],r[30]!==i||r[31]!==o||r[32]!==u||r[33]!==f.required||r[34]!==g.id||r[35]!==P||r[36]!==O?(T=React.createElement(React.Fragment,null,React.createElement(c.A,{label:"",help:u,error:P,context:o,className:i,inputId:g.id,required:f.required},O)),r[30]=i,r[31]=o,r[32]=u,r[33]=f.required,r[34]=g.id,r[35]=P,r[36]=O,r[37]=T):T=r[37],T}));u.displayName="ColorPickerField";const v=u;function m(){}},704:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(1728),a=r(1609),i=r.n(a),o=r(7967),s=r(790),l=r(7723),c=r(4164),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)};const u=i().forwardRef((function(e,t){var r=e.name,n=(e.fieldState,e.value),a=e.onChange,i=e.options,o=void 0===i?[]:i,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["name","fieldState","value","onChange","options"]),v=Array.isArray(o)?o:Object.keys(o).map((function(e){return{key:e,value:e,label:o[e]}})),m=n?"":"border-gray-200 text-gray-500 italic";return(0,s.jsxs)("select",d({className:(0,c.A)("input-base transition-[border-color] duration-300 ease-in-out",m),name:r,value:n,onChange:a,ref:t},u,{children:[!n&&(0,s.jsxs)("option",{value:"",disabled:!0,children:["- ",(0,l.__)("Select an option","simplybook")," -"]}),v.map((function(e){return(0,s.jsx)("option",{value:e.value,children:e.label},e.key?e.key:e.value)}))]}))}));function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}const m=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(29);let a,i,s,l,c,d,m,p,f;r[0]!==e?(({setting:f,field:s,fieldState:l,label:d,help:c,context:i,className:a,options:m,...p}=e),r[0]=e,r[1]=a,r[2]=i,r[3]=s,r[4]=l,r[5]=c,r[6]=d,r[7]=m,r[8]=p,r[9]=f):(a=r[1],i=r[2],s=r[3],l=r[4],c=r[5],d=r[6],m=r[7],p=r[8],f=r[9]);const h=f.id,g=l?.error?.message,y=!!l?.error?.message;let b,w;return r[10]!==s||r[11]!==l||r[12]!==h||r[13]!==m||r[14]!==p||r[15]!==t||r[16]!==y?(b=React.createElement(u,v({id:h,options:m,fieldState:l,"aria-invalid":y},s,{ref:t},p)),r[10]=s,r[11]=l,r[12]=h,r[13]=m,r[14]=p,r[15]=t,r[16]=y,r[17]=b):b=r[17],r[18]!==a||r[19]!==i||r[20]!==l||r[21]!==c||r[22]!==h||r[23]!==d||r[24]!==p.required||r[25]!==p.tooltip||r[26]!==g||r[27]!==b?(w=React.createElement(o.A,{label:d,tooltip:p.tooltip,help:c,error:g,context:i,className:a,inputId:h,required:p.required,fieldState:l},b),r[18]=a,r[19]=i,r[20]=l,r[21]=c,r[22]=h,r[23]=d,r[24]=p.required,r[25]=p.tooltip,r[26]=g,r[27]=b,r[28]=w):w=r[28],w}));m.displayName="SelectField";const p=m},4499:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1728),a=r(359),i=r(7967);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(null,arguments)}const s=e=>{const t=(0,n.c)(27);let r,s,l,c,d,u,v,m,p,f;if(t[0]!==e){const{setting:n,fieldState:a,name:i,label:o,help:h,context:g,className:y,type:b,copyField:w,required:x,..._}=e;p=n,c=a,u=i,d=o,s=g,r=y,f=b,l=w,m=x,v=_,t[0]=e,t[1]=r,t[2]=s,t[3]=l,t[4]=c,t[5]=d,t[6]=u,t[7]=v,t[8]=m,t[9]=p,t[10]=f}else r=t[1],s=t[2],l=t[3],c=t[4],d=t[5],u=t[6],v=t[7],m=t[8],p=t[9],f=t[10];const h=p.id,g=!!c?.error?.message,y=l??!1;let b,w;return t[11]!==h||t[12]!==u||t[13]!==v||t[14]!==g||t[15]!==y||t[16]!==f?(b=React.createElement(a.A,o({name:u,id:h,type:f,"aria-invalid":g,clickToSelect:y},v)),t[11]=h,t[12]=u,t[13]=v,t[14]=g,t[15]=y,t[16]=f,t[17]=b):b=t[17],t[18]!==r||t[19]!==s||t[20]!==c||t[21]!==h||t[22]!==d||t[23]!==v.tooltip||t[24]!==m||t[25]!==b?(w=React.createElement(i.A,{label:d,tooltip:v.tooltip,context:s,className:r,inputId:h,required:m,fieldState:c},b),t[18]=r,t[19]=s,t[20]=c,t[21]=h,t[22]=d,t[23]=v.tooltip,t[24]=m,t[25]=b,t[26]=w):w=t[26],w};s.displayName="TextField";const l=s},9815:(e,t,r)=>{r.d(t,{A:()=>Ee});var n=r(1728),a=r(1609),i=r.n(a),o=r(9785),s=r(4499),l=r(790),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)},d=(0,a.forwardRef)((function(e,t){e.type,e.className;var r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["type","className"]);return(0,l.jsx)("input",c({ref:t,type:"hidden"},r))}));d.displayName="HiddenInput";const u=d;function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}const m=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(10);let a,i,o,s;if(r[0]!==e){const{setting:t,field:n,fieldState:l,label:c,help:d,context:u,className:v,...m}=e;s=t,a=n,i=l,o=m,r[0]=e,r[1]=a,r[2]=i,r[3]=o,r[4]=s}else a=r[1],i=r[2],o=r[3],s=r[4];const l=!!i?.error?.message;let c;return r[5]!==a||r[6]!==o||r[7]!==s.id||r[8]!==l?(c=React.createElement(u,v({},a,{id:s.id,type:"hidden","aria-invalid":l},o)),r[5]=a,r[6]=o,r[7]=s.id,r[8]=l,r[9]=c):c=r[9],c}));m.displayName="HiddenField";const p=m;var f=r(4164),h=r(9418),g=r(5946),y=function(){return y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},y.apply(this,arguments)},b=(0,a.forwardRef)((function(e,t){var r=e.label,n=e.className,i=e.tooltip,o=e.value,s=e.onChange,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["label","className","tooltip","value","onChange"]),d=(0,a.useState)(1==o),u=d[0],v=d[1],m=(0,a.useState)(1==o?1:0),p=m[0],b=m[1],w=(0,f.A)("input-type-checkbox relative shrink-0 w-10 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:bg-blue-600","peer-checked:after:translate-x-[1.125rem] rtl:peer-checked:after:-translate-x-[1.125rem] peer-checked:after:border-white after:content-[''] after:absolute after:top-1 after:start-0.5 after:bg-white after:border-gray-200 after:border","after:rounded-full after:aspect-square after:h-4 after:w-4 after:transition-all");return(0,l.jsxs)("label",{className:"checkbox-field relative inline-flex items-center cursor-pointer",children:[(0,l.jsx)("input",y({type:"checkbox",checked:u,onChange:function(e){b(e.target.checked?1:0),v(e.target.checked),s&&s(e)},className:"sr-only peer",value:p},c)),(0,l.jsx)("div",{className:(0,f.A)(w,n)}),r&&(0,l.jsx)("span",{className:"ms-2 leading-5 font-medium text-black text-label ".concat(n||""),dangerouslySetInnerHTML:{__html:h.A.sanitize(r)}}),i&&(0,l.jsx)(g.A,{message:null==i?void 0:i.message,type:null==i?void 0:i.type})]})}));b.displayName="CheckboxInput";const w=b;var x=r(7967);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(null,arguments)}const E=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(22);let a,i,o,s,l,c,d;r[0]!==e?(({setting:d,fieldState:o,label:l,help:s,context:i,className:a,...c}=e),r[0]=e,r[1]=a,r[2]=i,r[3]=o,r[4]=s,r[5]=l,r[6]=c,r[7]=d):(a=r[1],i=r[2],o=r[3],s=r[4],l=r[5],c=r[6],d=r[7]);const u=d.id,v=o?.error?.message,m=!!o?.error?.message;let p,f;return r[8]!==u||r[9]!==l||r[10]!==c||r[11]!==m?(p=React.createElement(w,_({tooltip:c.tooltip,label:l,id:u,"aria-invalid":m},c)),r[8]=u,r[9]=l,r[10]=c,r[11]=m,r[12]=p):p=r[12],r[13]!==a||r[14]!==i||r[15]!==o||r[16]!==s||r[17]!==u||r[18]!==c.required||r[19]!==v||r[20]!==p?(f=React.createElement(x.A,{label:"",help:s,error:v,context:i,className:a,inputId:u,fieldState:o,required:c.required,type:"checkbox"},p),r[13]=a,r[14]=i,r[15]=o,r[16]=s,r[17]=u,r[18]=c.required,r[19]=v,r[20]=p,r[21]=f):f=r[21],f}));E.displayName="CheckboxField";const k=E;var N=r(704),S=r(6244),j=r(7723),C=r(7581),A=r(8981),P=r(323),O=r(9270),T=r(8846),R=r(4576);const q=function(){var e,t,r=(0,T.A)().onboardingCompleted,n="get_domain",a=new R.A(n),i=(0,O.I)({queryKey:[n],queryFn:function(){return a.get()},staleTime:36e5,retry:0,enabled:!!r}),o=i.isLoading,s=i.error,l=i.data;return null!==s&&console.error("Error fetching domain data:",s.message),{domain:null===(e=null==l?void 0:l.data)||void 0===e?void 0:e.domain,domainFetched:!o,hasError:null!==s,message:null!==(t=null==l?void 0:l.message)&&void 0!==t?t:null==s?void 0:s.message}};var F=r(1888),I=r(1577);const L=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(39),{upgrade:a,link:o,item:s}=e,{domain:l,domainFetched:c,hasError:d}=q(),u=c&&s.picture_preview&&s.picture_preview.length>0,v=a?"justify-start":"justify-between";let m,p,h,g,y,b,w,x,_,E,k;return r[0]!==v?(m=(0,f.A)(v,"flex flex-row items-center w-full space-x-3 text-base"),r[0]=v,r[1]=m):m=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(p=(0,f.A)("flex items-center"),r[2]=p):p=r[2],r[3]!==l||r[4]!==c||r[5]!==d||r[6]!==u||r[7]!==s.picture_preview||r[8]!==a?(h=!a&&c&&!d&&u&&i().createElement("img",{className:"w-20 h-20 max-w-[48px] max-h-[48px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-md",src:l+s.picture_preview,alt:(0,j.__)("Loading","simplybook")}),r[3]=l,r[4]=c,r[5]=d,r[6]=u,r[7]=s.picture_preview,r[8]=a,r[9]=h):h=r[9],r[10]!==c||r[11]!==d||r[12]!==u||r[13]!==s.name||r[14]!==a?(g=!a&&c&&!d&&!u&&i().createElement("div",{className:"w-20 h-20 max-w-[48px] max-h-[48px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-md font-bold"},s.name.charAt(0).toUpperCase()),r[10]=c,r[11]=d,r[12]=u,r[13]=s.name,r[14]=a,r[15]=g):g=r[15],r[16]!==a?(y=a&&i().createElement("div",{className:"w-20 h-20 max-w-[48px] max-h-[48px] bg-tertiary text-xs flex items-center justify-center overflow-hidden rounded-md font-bold text-white"},i().createElement(I.A,{name:"chevron-up",style:{color:"white"}})),r[16]=a,r[17]=y):y=r[17],r[18]!==s.name?(b=i().createElement("div",{className:"font-bold ms-4"},s.name),r[18]=s.name,r[19]=b):b=r[19],r[20]!==h||r[21]!==g||r[22]!==y||r[23]!==b?(w=i().createElement("div",{className:p},h,g,y,b),r[20]=h,r[21]=g,r[22]=y,r[23]=b,r[24]=w):w=r[24],r[25]!==c||r[26]!==d||r[27]!==o||r[28]!==a?(x=!a&&c&&!d&&i().createElement(P.A,{icon:!0,iconName:"square-arrow-up-right",iconClass:"px-2",className:"text-black flex items-center",page:o},(0,j.__)("Edit","simplybook")),r[25]=c,r[26]=d,r[27]=o,r[28]=a,r[29]=x):x=r[29],r[30]!==m||r[31]!==w||r[32]!==x?(_=i().createElement("div",{className:m},w,x),r[30]=m,r[31]=w,r[32]=x,r[33]=_):_=r[33],r[34]!==a?(E=a&&i().createElement("div",{className:"flex items-center flex-grow"},i().createElement("div",{className:"relative"},i().createElement(F.A,{className:"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary",btnVariant:"square-small",target:"_blank",loginLink:"v2/r/payment-widget"},(0,j.__)("Upgrade","simplybook")))),r[34]=a,r[35]=E):E=r[35],r[36]!==_||r[37]!==E?(k=i().createElement(i().Fragment,null,i().createElement("div",{className:"w-full flex items-center justify-between px-4 py-5 mb-4 bg-gray-100"},_,E)),r[36]=_,r[37]=E,r[38]=k):k=r[38],k}));L.displayName="ListItem";const V=L;var U=r(9866),D=r(3042);const H=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(42),{setting:i,label:o}=e,{services:s,servicesFetched:l}=(0,A.A)(),{providers:c,providersFetched:d}=(0,U.A)();let u;r[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],r[0]=u):u=r[0];const[v,m]=(0,a.useState)(u),[p,f]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),{providersRemaining:y}=(0,D.A)();let b;r[1]!==s||r[2]!==l?(b={fetched:l,data:s,show_upsell:!1},r[1]=s,r[2]=l,r[3]=b):b=r[3];const w=y<4;let x,_;r[4]!==c||r[5]!==d||r[6]!==w?(x={fetched:d,data:c,show_upsell:w},r[4]=c,r[5]=d,r[6]=w,r[7]=x):x=r[7],r[8]!==b||r[9]!==x?(_={services:b,providers:x},r[8]=b,r[9]=x,r[10]=_):_=r[10];const E=_;let k;r[11]!==i.source||r[12]!==E?(k=()=>{m(E[i.source]?.data),f(E[i.source]?.fetched),g(E[i.source]?.show_upsell)},r[11]=i.source,r[12]=E,r[13]=k):k=r[13];const N=E[i.source];let S,C;r[14]!==N?(S=[N],r[14]=N,r[15]=S):S=r[15],(0,a.useEffect)(k,S),r[16]!==i.edit_link||r[17]!==i.link?(C=e=>i?.edit_link?.replace("{ID}",e)??i.link,r[16]=i.edit_link,r[17]=i.link,r[18]=C):C=r[18];const P=C;if(p&&!Array.isArray(v)){let e,t;return r[19]!==i.label?(e=(0,j.sprintf)((0,j.__)("No %s found."),i.label.toLowerCase()),r[19]=i.label,r[20]=e):e=r[20],r[21]!==e?(t=React.createElement(React.Fragment,null,e),r[21]=e,r[22]=t):t=r[22],t}const O=i?.premiumText??"";let T;r[23]!==O?(T={id:"upgrade",name:O,picture_preview:""},r[23]=O,r[24]=T):T=r[24];const R=T;let q,F,I,L;return r[25]!==p||r[26]!==i.label?(q=!p&&React.createElement("p",{className:"mb-4"},(0,j.sprintf)((0,j.__)("Loading %s..."),i.label.toLowerCase())),r[25]=p,r[26]=i.label,r[27]=q):q=r[27],r[28]!==P||r[29]!==o||r[30]!==v||r[31]!==p?(F=p&&v.map((e=>React.createElement(V,{upgrade:!1,key:e.id+e.source,label:o,link:P(e.id),item:e}))),r[28]=P,r[29]=o,r[30]=v,r[31]=p,r[32]=F):F=r[32],r[33]!==o||r[34]!==R||r[35]!==d||r[36]!==h?(I=d&&h&&React.createElement(V,{upgrade:!0,label:o,link:"v2/r/payment-widget",item:R}),r[33]=o,r[34]=R,r[35]=d,r[36]=h,r[37]=I):I=r[37],r[38]!==q||r[39]!==F||r[40]!==I?(L=React.createElement("div",{className:"w-full"},q,F,I),r[38]=q,r[39]=F,r[40]=I,r[41]=L):L=r[41],L}));H.displayName="ListField";const B=H;var M=r(1730),$=function(e){var t=e.id,r=e.label,n=e.colors,o=e.onChange,s=e.value,c=e.setShowPreview,d=i().useState(n),u=d[0],v=d[1],m=(0,M.A)(),p=m.getValue,f=m.setValue,h=m.settings;return m.saveSettings,m.invalidateSettings,(0,a.useEffect)((function(){if("custom"===t){var e=[];e.push(p("sb_base_color")),e.push(p("btn_color_1")),e.push(p("body_bg_color")),e.push(p("light_font_color")),e.push(p("dark_font_color")),v(e)}}),[h]),console.log("value ",s),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"pb-1 font-medium text-black text-md ",children:r}),(0,l.jsxs)("div",{className:"flex space-x-2 pb-4",children:[(0,l.jsx)("div",{className:"border border-gray-300 p-2 gap-2 flex cursor-pointer",onClick:function(e){return console.log(t),void(o&&t&&("custom"!==t&&Array.isArray(n)&&Object.entries({sb_base_color:0,booking_nav_bg_color:0,btn_color_1:1,body_bg_color:2,light_font_color:3,dark_font_color:4}).forEach((function(e){var t=e[0],r=e[1];n&&n.hasOwnProperty(r)&&(console.log("set color",t,n[r],"of index",r),f(t,n[r]))})),console.log("palettes",t,"value",s),f("palette",t),o(t)))},children:null==u?void 0:u.map((function(e,t){return(0,l.jsx)("div",{style:{backgroundColor:e},className:"w-20 h-6 border border-gray-300"},t)}))}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:function(e){return c&&c(!0)},children:[(0,l.jsx)(I.A,{name:"eye"}),(0,l.jsx)("span",{children:s===t?(0,j.__)("live","simplybook"):(0,j.__)("preview","simplybook")})]})]})]})};$.displayName="PaletteInput";const K=$;var Q=r(4705);const z=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(29);let o,s,l,c,d,u,v;r[0]!==e?(({setting:v,fieldState:l,label:d,help:c,context:s,className:o,...u}=e),r[0]=e,r[1]=o,r[2]=s,r[3]=l,r[4]=c,r[5]=d,r[6]=u,r[7]=v):(o=r[1],s=r[2],l=r[3],c=r[4],d=r[5],u=r[6],v=r[7]);const m=v.id,[p,f]=(0,a.useState)(!1),h=(0,a.useRef)(null);let g,y;r[8]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&f&&f(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},y=[f],r[8]=g,r[9]=y):(g=r[8],y=r[9]),(0,a.useEffect)(g,y);const b=l?.error?.message,w=o+" relative",_=u.required;let E,k,N;if(r[10]!==u.onChange||r[11]!==u.value||r[12]!==v.options){let e;r[14]!==u.onChange||r[15]!==u.value?(e=(e,t)=>i().createElement(K,{key:t,id:e.id,label:e.label,colors:e.colors,onChange:u?.onChange,value:u?.value,setShowPreview:f}),r[14]=u.onChange,r[15]=u.value,r[16]=e):e=r[16],E=v.options.map(e),r[10]=u.onChange,r[11]=u.value,r[12]=v.options,r[13]=E}else E=r[13];return r[17]!==p?(k=p&&i().createElement("div",{ref:h,style:{insetInlineEnd:"-200px"},className:"absolute top-0"},i().createElement(Q.A,null)),r[17]=p,r[18]=k):k=r[18],r[19]!==s||r[20]!==c||r[21]!==m||r[22]!==d||r[23]!==u.required||r[24]!==b||r[25]!==w||r[26]!==E||r[27]!==k?(N=i().createElement(x.A,{label:d,help:c,error:b,context:s,className:w,inputId:m,required:_},E,k),r[19]=s,r[20]=c,r[21]=m,r[22]=d,r[23]=u.required,r[24]=b,r[25]=w,r[26]=E,r[27]=k,r[28]=N):N=r[28],N}));z.displayName="PalettesField";const W=z;var G=r(359);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J.apply(null,arguments)}r(332);const Y=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(26);let a,i,o,s,l,c;if(r[0]!==e){const{setting:t,fieldState:n,label:d,help:u,context:v,className:m,...p}=e;c=t,o=n,s=d,i=v,a=m,l=p,r[0]=e,r[1]=a,r[2]=i,r[3]=o,r[4]=s,r[5]=l,r[6]=c}else a=r[1],i=r[2],o=r[3],s=r[4],l=r[5],c=r[6];const d=c.id;let u;if(r[7]===Symbol.for("react.memo_cache_sentinel")){const e=new R.A("logout");u=async t=>{t.preventDefault();const r=window.confirm((0,j.sprintf)((0,j.__)("Are you sure you want to logout?%1$sAll settings will be lost.%2$sYou need to reset your booking page(s) manually.","simplybook"),"\n\n- ","\n- "));if(r){try{await e.setPayload({user_confirmed:r}).post()}catch(e){const t=e;return void console.error("Logout request failed",t)}window.location.assign(simplybook.dashboard_url)}},r[7]=u}else u=r[7];const v=u,m=l.tooltip,p=l.required,f=!!o?.error?.message;let h;r[8]!==d||r[9]!==l||r[10]!==f?(h=React.createElement(G.A,J({className:"mb-4",id:d,type:"text","aria-invalid":f},l)),r[8]=d,r[9]=l,r[10]=f,r[11]=h):h=r[11];const g=!!o?.error?.message;let y,b,w,_;return r[12]===Symbol.for("react.memo_cache_sentinel")?(y=(0,j.__)("Log out","simplybook"),r[12]=y):y=r[12],r[13]===Symbol.for("react.memo_cache_sentinel")?(b=(0,j.__)("Log out","simplybook"),r[13]=b):b=r[13],r[14]!==d||r[15]!==g?(w=React.createElement(F.A,{id:d,btnVariant:"tertiary-small","aria-invalid":g,label:y,onClick:v},b),r[14]=d,r[15]=g,r[16]=w):w=r[16],r[17]!==a||r[18]!==i||r[19]!==d||r[20]!==s||r[21]!==l.required||r[22]!==l.tooltip||r[23]!==h||r[24]!==w?(_=React.createElement(x.A,{label:s,tooltip:m,context:i,className:a,inputId:d,required:p},h,w),r[17]=a,r[18]=i,r[19]=d,r[20]=s,r[21]=l.required,r[22]=l.tooltip,r[23]=h,r[24]=w,r[25]=_):_=r[25],_}));Y.displayName="AuthenticationField";const Z=Y;function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(null,arguments)}const ee=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(7),{control:a,item:i}=e,s=`theme_settings.${i.config_key}`;let l,c;return r[0]!==i?(l=e=>{const{field:t,fieldState:r}=e;return 0==i.is_visible||0==i.widget_support?null:"checkbox"===i.config_type?React.createElement(k,X({},t,{fieldState:r,setting:i,label:i.config_title,className:"theme-config-field"})):i.config_type.includes("color")?React.createElement(C.A,X({},t,{fieldState:r,setting:i,label:i.config_title,className:"theme-config-field"})):"select"===i.config_type?React.createElement(N.A,X({},t,{fieldState:r,setting:i,label:i.config_title,options:i.values,className:"theme-config-field"})):null},r[0]=i,r[1]=l):l=r[1],r[2]!==a||r[3]!==i.default_value||r[4]!==s||r[5]!==l?(c=React.createElement(o.xI,{control:a,name:s,defaultValue:i.default_value,render:l}),r[2]=a,r[3]=i.default_value,r[4]=s,r[5]=l,r[6]=c):c=r[6],c})),te=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(14),{control:a,parentSetting:i,selectedTheme:o}=e;let s;r[0]===Symbol.for("react.memo_cache_sentinel")?(s={checkbox:10,select:9,color:8},r[0]=s):s=r[0];const l=s;let c,d,u;if(r[1]!==a||r[2]!==i?.translations||r[3]!==o?.config){let e;r[6]!==i?.translations?(e=(e,t)=>{const[,r]=t;if(0==r.is_visible||0==r.widget_support)return e;const n={...r};return["color","gradient"].some((e=>n.config_type.includes(e)))&&(n.config_type="color"),e[n.config_type]||(e[n.config_type]=[]),"select"===n.config_type&&(n.values=Object.entries(n.values).map((e=>{const[t,r]=e;return{key:t,value:r,label:String(i?.translations?.[r]??r)}}))),n.config_title?n.config_title=i?.translations[n.config_title]??n.config_title:n.config_title=i?.translations[n.config_key]??n.config_key,e[n.config_type].push(n),e},r[6]=i?.translations,r[7]=e):e=r[7];const t=Object.entries(o?.config).reduce(e,{});let n;r[8]===Symbol.for("react.memo_cache_sentinel")?(n=(e,t)=>{const[r]=e,[n]=t;return(l[n]??0)-(l[r]??0)},r[8]=n):n=r[8];const s=Object.entries(t).sort(n);let u;c="theme-config",r[9]!==a?(u=e=>{const[t,r]=e;return React.createElement("div",{key:t,className:`theme-config-group theme-config-group-${t}`},r.map((e=>React.createElement(ee,{key:e.config_key,control:a,item:e}))))},r[9]=a,r[10]=u):u=r[10],d=s.map(u),r[1]=a,r[2]=i?.translations,r[3]=o?.config,r[4]=c,r[5]=d}else c=r[4],d=r[5];return r[11]!==c||r[12]!==d?(u=React.createElement("div",{className:c},d),r[11]=c,r[12]=d,r[13]=u):u=r[13],u}));function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},re.apply(null,arguments)}const ne=(0,a.forwardRef)(((e,t)=>{const r=(0,n.c)(25);let a,s;if(r[0]!==e){const{control:t,reset:n,...i}=e;a=t,s=i,r[0]=e,r[1]=a,r[2]=s}else a=r[1],s=r[2];const{onboardingCompleted:l}=(0,T.A)();let c;r[3]===Symbol.for("react.memo_cache_sentinel")?(c=new R.A("theme_list"),r[3]=c):c=r[3];const d=c;let u,v;r[4]===Symbol.for("react.memo_cache_sentinel")?(u=["theme_list"],v=()=>d.get(),r[4]=u,r[5]=v):(u=r[4],v=r[5]);const m=!!l;let p;r[6]!==m?(p={queryKey:u,queryFn:v,staleTime:36e5,retry:0,enabled:m},r[6]=m,r[7]=p):p=r[7];const{isLoading:f,error:h,data:g}=(0,O.I)(p);let y,b;null!==h&&console.error("Error fetching domain data:",h.message),r[8]!==g?.data?(b=g?.data?.map(ie)??[],r[8]=g?.data,r[9]=b):b=r[9],y=b;const w=y;let x;r[10]!==g?.data?(x=e=>g?.data?.find((t=>t.name===e)),r[10]=g?.data,r[11]=x):x=r[11];const _=x;let E,k,S;return r[12]!==h?(E=h&&i().createElement("div",{className:"error-message"},(0,j.__)("Error fetching theme settings. Please try again later.","simplybook")),r[12]=h,r[13]=E):E=r[13],r[14]!==a||r[15]!==h||r[16]!==_||r[17]!==f||r[18]!==w||r[19]!==s?.setting||r[20]!==g?.data?(k=!f&&!h&&g?.data&&i().createElement(o.xI,{control:a,name:s?.setting?.id,defaultValue:s?.setting?.value??s?.setting?.default??"",render:e=>{const{field:t,fieldState:r}=e,n=_(t.value);return i().createElement(i().Fragment,null,i().createElement(N.A,re({},t,{setting:s?.setting,options:w,label:s?.setting?.label,help:s?.setting?.help,required:s?.setting?.required,disabled:f,fieldState:r,className:"w-full",onChange:e=>{t.onChange(e.target.value)}})),n?.config&&i().createElement(te,{control:a,parentSetting:s?.setting,selectedTheme:n}))}}),r[14]=a,r[15]=h,r[16]=_,r[17]=f,r[18]=w,r[19]=s?.setting,r[20]=g?.data,r[21]=k):k=r[21],r[22]!==k||r[23]!==E?(S=i().createElement(i().Fragment,null,E,k),r[22]=k,r[23]=E,r[24]=S):S=r[24],S}));ne.displayName="ThemeField";const ae=ne;function ie(e){return{label:e.title.charAt(0).toUpperCase()+e.title.slice(1),value:e.name,key:e.id}}var oe=r(982),se=r(6188),le=r(9964),ce=function(){return ce=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ce.apply(this,arguments)};const de=function(e){var t=e.providerId,r=e.provider;if(!r)return(0,l.jsxs)("div",{className:"text-gray-500",children:[(0,j.__)("Loading","simplybook"),"..."]});var n=(0,le.r)(),i=n.crudState,o=n.dispatch,s=(0,a.useState)(r),c=s[0],d=s[1];(0,a.useEffect)((function(){var e,n=null===(e=i.unsavedProviders)||void 0===e?void 0:e.find((function(e){return e.id===t}));d(null!=n?n:r)}),[]),(0,a.useEffect)((function(){i.providerErrors&&i.providerErrors[t]&&!i.providersHasUnsavedChanges&&o({dispatchType:"clearAllErrorsForItem",change:{item:{id:t}}})}),[i.providerErrors,i.providersHasUnsavedChanges]);var u=function(e,r){var n,a,s=((n={id:t})[e]="qty"===e&&""!==r?Number(r):r,n),l=i.providerErrors?i.providerErrors[t]:{};!!l&&Object.keys(l).includes(e)&&o({dispatchType:"clearErrorsForField",change:{item:(a={id:t},a[e]="",a)}}),i.generalError&&o({dispatchType:"generalError",change:{generalError:""}}),d((function(e){return ce(ce({},e),s)})),o({dispatchType:"unsavedChangesToProviders",change:{item:s}})},v=function(e,r){var n,a,s,l,c=!1;switch(e){case"name":c=""!==r,l=[(0,j.__)("Name is a required field.","simplybook")];break;case"email":c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||""===r,l=[(0,j.__)("Please enter a valid email address (e.g., example@domain.com)","simplybook")];break;case"phone":c=/^((\(\+|00\))|(\+|00))[1-9][0-9 \-\(\)\.]{7,32}$/.test(r)||""===r,l=[(0,j.__)("Please enter a valid phone number with country code (e.g., +31 123 456 789)","simplybook")];break;case"qty":var d=Number(r);c=!isNaN(d)&&!(d>99||0===d),d>99||(l=[(0,j.__)("Please enter a valid number between 1 and 99","simplybook")])}if(!c&&l){var u=((n={})[e]=l,n);o({dispatchType:"errorsOnFields",change:{providerErrors:(a={},a[t]=ce({},u),a)}})}else i.providerErrors&&i.providerErrors[t]&&o({dispatchType:"clearErrorsForField",change:{item:(s={id:t},s[e]="",s)}});return c};return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsxs)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"provider-name",children:[(0,j.__)("Service provider name","simplybook")," *"]}),(0,l.jsx)("input",{id:"provider-name",type:"text",value:c.name,onChange:function(e){return u("name",e.target.value)},className:(0,f.A)("input-base-no-shadow",i.providerErrors&&i.providerErrors[t]?i.providerErrors[t].name&&"ring-2 ring-red-600":null),required:!0,onBlur:function(e){v("name",e.target.value.trim())}}),i.providerErrors&&i.providerErrors[t]?i.providerErrors[t].name&&(0,l.jsx)("div",{children:i.providerErrors[t].name.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsx)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"provider-email",children:(0,j.__)("E-mail","simplybook")}),(0,l.jsx)("input",{id:"provider-email",type:"email",value:c.email,onChange:function(e){return u("email",e.target.value)},onBlur:function(e){v("email",e.target.value.trim())},className:(0,f.A)("input-base-no-shadow",i.providerErrors&&i.providerErrors[t]?i.providerErrors[t].email&&"ring-2 ring-red-600":null)}),i.providerErrors&&i.providerErrors[t]?i.providerErrors[t].email&&(0,l.jsx)("div",{children:i.providerErrors[t].email.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsx)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"provider-phone",children:(0,j.__)("Phone","simplybook")}),(0,l.jsx)("input",{id:"provider-phone",type:"tel",value:c.phone,onChange:function(e){return u("phone",e.target.value)},pattern:"[+]?[0-9\\s\\-\\(\\)]{7,20}",title:(0,j.__)("Please enter a valid phone number with country code (e.g., +31 123 456 789)","simplybook"),className:(0,f.A)("input-base-no-shadow",i.providerErrors&&i.providerErrors[t]?i.providerErrors[t].phone&&"ring-2 ring-red-600":null),placeholder:"+31 123 456 789",onBlur:function(e){v("phone",e.target.value.trim())}}),i.providerErrors&&i.providerErrors[t]?i.providerErrors[t].phone&&(0,l.jsx)("div",{children:i.providerErrors[t].phone.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsxs)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"provider-qty",children:[(0,j.__)("How many clients can be served at the same time?","simplybook")," *"]}),(0,l.jsx)("input",{id:"provider-qty",type:"text",pattern:"[0-9]",placeholder:"1",value:c.qty,required:!0,onChange:function(e){var r,n=e.target.value.trim();if((""===n||v("qty",n))&&u("qty",n),""===n){var a={qty:[(0,j.__)("Please enter a valid number between 1 and 99","simplybook")]};o({dispatchType:"errorsOnFields",change:{providerErrors:(r={},r[t]=ce({},a),r)}})}},onBlur:function(e){v("qty",e.target.value.trim())},className:(0,f.A)("input-base-no-shadow",i.providerErrors&&i.providerErrors[t]?i.providerErrors[t].qty&&"ring-2 ring-red-600":null)}),i.providerErrors&&i.providerErrors[t]?i.providerErrors[t].qty&&(0,l.jsx)("div",{children:i.providerErrors[t].qty.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),t&&"new"!==t&&(0,l.jsx)("div",{className:"mt-4 max-w-fit",children:(0,l.jsx)(F.A,{className:"!border-sb-blue !text-sb-blue flex-row-reverse",icon:!0,iconName:"target-blank",iconClass:"fa-regular",reverseIcon:!0,btnVariant:"square-ghost-small",loginLink:"/v2/management?hash=providers/edit/details/".concat(t),children:(0,j.__)("Advanced settings","simplybook")})})]})},ue=function(e){var t,r=e.provider,n=e.providers,i=(0,le.r)(),o=i.crudState,s=i.dispatch,c=i.handleDeletingItem,d=q().domain,u=(0,a.useState)(!1),v=u[0],m=u[1],p=(0,a.useState)(!1),h=p[0],g=p[1],y=(0,a.useState)(!1),b=y[0],w=y[1],x=(0,a.useState)(n.length<=1),_=x[0],E=x[1],k=(0,a.useState)(!1),N=k[0],S=k[1],C=r.picture_preview&&r.picture_preview.length>0;(0,a.useEffect)((function(){var e,t=null===(e=o.currentlyVisibleProviders)||void 0===e?void 0:e.includes(r.id);g(null!=t?t:!!r.is_visible)}),[]),(0,a.useEffect)((function(){var e,t,n=null===(e=o.providers)||void 0===e?void 0:e.every((function(e){return r.id===e.id})),a=o.currentlyVisibleProviders.every((function(e){return r.id===e}));a!=b&&w(a);var i=null===(t=o.providers)||void 0===t?void 0:t.filter((function(e){return e.is_visible})).every((function(e){return r.id===e.id})),s=null!=i&&null!=n&&(i||a||n);s!=_&&E(s);var l=o.currentlyVisibleProviders.includes(r.id);l!=h&&g(l)}),[o]),(0,a.useEffect)((function(){var e=o.providerErrors?o.providerErrors[r.id]:null;e&&!v&&m(!0),S(!!e)}),[o.providerErrors]);var A=function(){m(!v)};return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg mb-4 bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-t-lg gap-2",onClick:function(){N||A()},children:[(0,l.jsxs)("div",{className:"flex space-x-3 flex-1 max-w-3/5",children:[C?(0,l.jsx)("img",{className:"w-20 h-20 min-w-[36px] max-w-[36px] max-h-[36px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-full",src:d+r.picture_preview,alt:"..."}):(0,l.jsx)("div",{className:"w-20 h-20 min-w-[36px] max-w-[36px] max-h-[36px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-full font-bold",children:null===(t=r.name)||void 0===t?void 0:t.charAt(0).toUpperCase()}),(0,l.jsx)("div",{className:"flex items-center flex-1 max-w-2/3",children:(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:r.name})})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{type:"button",onClick:function(e){e.stopPropagation(),c(r.id)},disabled:o.isLoading||_,className:"text-gray-500 hover:text-red-600 hover:bg-red-100 disabled:opacity-50 p-1 rounded cursor-pointer disabled:cursor-not-allowed flex items-center h-6",title:_?(0,j.__)("Cannot delete the only visible service provider","simplybook"):(0,j.__)("Delete Service Provider","simplybook"),children:(0,l.jsx)(oe.g,{icon:se.yLS,className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"mt-[1px]",onClick:function(e){return e.stopPropagation()},children:(0,l.jsxs)("label",{className:(0,f.A)("relative inline-flex items-center mb-0",b?"cursor-not-allowed":"cursor-pointer"),title:b?(0,j.__)("Cannot hide the only visible service provider","simplybook"):h?(0,j.__)("Visible","simplybook"):(0,j.__)("Hidden","simplybook"),children:[(0,l.jsx)("input",{type:"checkbox",checked:h,onChange:function(e){e.stopPropagation(),s({dispatchType:"unsavedChangesToProviders",change:{item:{id:r.id,is_visible:e.target.checked}}}),g(e.target.checked)},disabled:b,className:"sr-only peer"}),(0,l.jsx)("div",{className:(0,f.A)("w-8 h-[18px] bg-gray-300 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer","peer-checked:bg-blue-600 peer-checked:after:translate-x-[0.8rem] rtl:peer-checked:after:-translate-x-[0.8rem] peer-checked:after:border-white","after:content-[''] after:mx-[0.2rem] flex items-center after:start-0.5 after:bg-white after:border-gray-200","after:border after:rounded-full after:aspect-square after:h-3 after:w-3 after:transition-all",b&&"opacity-50 cursor-not-allowed")})]})}),(0,l.jsx)("button",{type:"button",disabled:N,onClick:function(e){e.stopPropagation(),A()},className:(0,f.A)("px-1 rounded text-gray-500 active:ring-4 focus:ring-4 active:ring-blue-300 focus:ring-blue-300 hover:bg-gray-200 transition-transform duration-200 cursor-pointer flex items-center h-6",N&&"pointer-events-none opacity-50 cursor-not-allowed"),title:v?(0,j.__)("Collapse","simplybook"):(0,j.__)("Expand","simplybook"),children:(0,l.jsx)(oe.g,{icon:se.Jt$,className:(0,f.A)("w-4 h-4 self-start mt-1 transition-transform duration-200",v&&"rotate-180")})})]})]}),v&&(0,l.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50 rounded-b-lg",children:(0,l.jsx)(de,{provider:r,providerId:r.id})})]})};var ve=r(8908),me=r(5959);function pe(e){return null!=e}var fe=function(){return fe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},fe.apply(this,arguments)};const he=function(e){var t=e.serviceId,r=e.service;if(!r)return(0,l.jsxs)("div",{className:"text-gray-500",children:[(0,j.__)("Loading","simplybook"),"..."]});var n=(0,le.r)(),i=n.crudState,o=n.dispatch,s=(0,a.useState)(r),c=s[0],d=s[1];(0,a.useEffect)((function(){var e,n=null===(e=i.unsavedServices)||void 0===e?void 0:e.find((function(e){return e.id===t}));d(null!=n?n:r)}),[]),(0,a.useEffect)((function(){i.serviceErrors&&i.serviceErrors[t]&&!i.servicesHasUnsavedChanges&&o({dispatchType:"clearAllErrorsForItem",change:{item:{id:t}}})}),[i.serviceErrors,i.servicesHasUnsavedChanges]);var u=function(e,r){var n,a,s=((n={id:t})[e]="duration"===e&&""!==r?Number(r):r,n),l=i.serviceErrors?i.serviceErrors[t]:{};!!l&&Object.keys(l).includes(e)&&o({dispatchType:"clearErrorsForField",change:{item:(a={id:t},a[e]="",a)}}),i.generalError&&o({dispatchType:"generalError",change:{generalError:""}}),d((function(e){return fe(fe({},e),s)})),o({dispatchType:"unsavedChangesToServices",change:{item:s}})},v=function(e,r){var n,a,s,l,c=!1;switch(e){case"name":c=""!==r,l=[(0,j.__)("Name is a required field.","simplybook")];break;case"duration":var d=Number(r);c=!isNaN(d)&&0!==d,l=[(0,j.__)("Please enter a valid number that is a multiple of your selected timeframe","simplybook")]}if(!c&&l){var u=((n={})[e]=l,n);o({dispatchType:"errorsOnFields",change:{serviceErrors:(a={},a[t]=fe({},u),a)}})}else i.serviceErrors&&i.serviceErrors[t]&&o({dispatchType:"clearErrorsForField",change:{item:(s={id:t},s[e]="",s)}});return c};return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsxs)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"service-name",children:[(0,j.__)("Service name","simplybook")," *"]}),(0,l.jsx)("input",{id:"service-name",type:"text",value:c.name,onChange:function(e){return u("name",e.target.value)},className:(0,f.A)("input-base-no-shadow",i.serviceErrors&&i.serviceErrors[t]?i.serviceErrors[t].name&&"ring-2 ring-red-600":null),required:!0,onBlur:function(e){v("name",e.target.value.trim())}}),i.serviceErrors&&i.serviceErrors[t]?i.serviceErrors[t].name&&(0,l.jsx)("div",{children:i.serviceErrors[t].name.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsxs)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"service-duration",children:[(0,j.__)("Service duration (minutes)","simplybook")," *"]}),(0,l.jsx)("input",{id:"service-duration",type:"text",pattern:"[0-9]",placeholder:"60",value:c.duration,required:!0,onChange:function(e){var r,n=e.target.value.trim();if((""===n||v("duration",n))&&u("duration",n),""===n){var a={duration:[(0,j.__)("Please enter a valid number that is a multiple of your selected timeframe","simplybook")]};o({dispatchType:"errorsOnFields",change:{serviceErrors:(r={},r[t]=fe({},a),r)}})}},onBlur:function(e){v("duration",e.target.value.trim())},className:(0,f.A)("input-base-no-shadow",i.serviceErrors&&i.serviceErrors[t]?i.serviceErrors[t].duration&&"ring-2 ring-red-600":null)}),i.serviceErrors&&i.serviceErrors[t]?i.serviceErrors[t].duration&&(0,l.jsx)("div",{children:i.serviceErrors[t].duration.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),t&&"new"!==t&&(0,l.jsx)("div",{className:"mt-4 max-w-fit",children:(0,l.jsx)(F.A,{className:"!border-sb-blue !text-sb-blue flex-row-reverse",icon:!0,iconName:"target-blank",iconClass:"fa-regular",reverseIcon:!0,btnVariant:"square-ghost-small",loginLink:"/v2/management?hash=services/edit/details/".concat(t),children:(0,j.__)("Advanced settings","simplybook")})})]})},ge=function(e){var t,r=e.service,n=e.services,i=e.isLoading,o=(0,le.r)(),s=o.crudState,c=o.dispatch,d=o.handleDeletingItem,u=q().domain,v=(0,a.useState)(!1),m=v[0],p=v[1],h=(0,a.useState)(!1),g=h[0],y=h[1],b=(0,a.useState)(!1),w=b[0],x=b[1],_=(0,a.useState)(n.length<=1),E=_[0],k=_[1],N=(0,a.useState)(!1),S=N[0],C=N[1],A=r.picture_preview&&r.picture_preview.length>0;(0,a.useEffect)((function(){var e=s.currentlyVisibleServices.includes(r.id);y(null!=e?e:!!r.is_visible)}),[]),(0,a.useEffect)((function(){var e,t,n=null===(e=s.services)||void 0===e?void 0:e.every((function(e){return r.id===e.id})),a=s.currentlyVisibleServices.every((function(e){return r.id===e}));a!=w&&x(a);var i=null===(t=s.services)||void 0===t?void 0:t.filter((function(e){return e.is_visible})).every((function(e){return r.id===e.id})),o=null!=i&&null!=n&&(i||a||n);o!=E&&k(o);var l=s.currentlyVisibleServices.includes(r.id);l!=g&&y(l)}),[s]),(0,a.useEffect)((function(){var e=s.serviceErrors?s.serviceErrors[r.id]:null;e&&p(!0),C(!!e)}),[s.serviceErrors]);var P=function(){p(!m)};return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg mb-4 bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-t-lg  gap-2",onClick:function(){S||P()},children:[(0,l.jsxs)("div",{className:"flex space-x-3 flex-1 max-w-3/5",children:[A?(0,l.jsx)("img",{className:"w-20 h-20 min-w-[36px] max-w-[36px] max-h-[36px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-full",src:u+r.picture_preview,alt:"..."}):(0,l.jsx)("div",{className:"w-20 h-20 min-w-[36px] max-w-[36px] max-h-[36px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-full font-bold",children:null===(t=r.name)||void 0===t?void 0:t.charAt(0).toUpperCase()}),(0,l.jsx)("div",{className:"flex items-center flex-1 max-w-2/3",children:(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:r.name})})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{type:"button",onClick:function(e){e.stopPropagation(),d(r.id)},disabled:i||E,className:"text-gray-500 hover:text-red-600 hover:bg-red-100 disabled:opacity-50 p-1 cursor-pointer disabled:cursor-not-allowed flex items-center h-6",title:E?(0,j.__)("Cannot delete the only visible service","simplybook"):(0,j.__)("Delete Service","simplybook"),children:(0,l.jsx)(oe.g,{icon:se.yLS,className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"mt-[1px]",onClick:function(e){return e.stopPropagation()},children:(0,l.jsxs)("label",{className:(0,f.A)("relative inline-flex items-center mb-0",w?"cursor-not-allowed":"cursor-pointer"),title:w?(0,j.__)("Cannot hide the last visible service","simplybook"):g?(0,j.__)("Visible","simplybook"):(0,j.__)("Hidden","simplybook"),children:[(0,l.jsx)("input",{type:"checkbox",checked:g,onChange:function(e){e.stopPropagation(),c({dispatchType:"unsavedChangesToServices",change:{item:{id:r.id,is_visible:e.target.checked}}}),y(e.target.checked)},disabled:w,className:"sr-only peer"}),(0,l.jsx)("div",{className:(0,f.A)("w-8 h-[18px] bg-gray-300 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer","peer-checked:bg-blue-600 peer-checked:after:translate-x-[0.8rem] rtl:peer-checked:after:-translate-x-[0.8rem] peer-checked:after:border-white","after:content-[''] after:mx-[0.2rem] flex items-center after:start-0.5 after:bg-white after:border-gray-200","after:border after:rounded-full after:aspect-square after:h-3 after:w-3 after:transition-all",w&&"opacity-50 cursor-not-allowed")})]})}),(0,l.jsx)("button",{type:"button",disabled:S,onClick:function(e){e.stopPropagation(),P()},className:(0,f.A)("px-1 rounded text-gray-500 active:ring-4 focus:ring-4 active:ring-blue-300 focus:ring-blue-300 hover:bg-gray-200 transition-transform duration-200 cursor-pointer flex items-center h-6",S&&"pointer-events-none opacity-50 cursor-not-allowed"),title:m?(0,j.__)("Collapse","simplybook"):(0,j.__)("Expand","simplybook"),children:(0,l.jsx)(oe.g,{icon:se.Jt$,className:(0,f.A)("w-4 h-4 self-start mt-1 transition-transform duration-200",m&&"rotate-180")})})]})]}),m&&(0,l.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50 rounded-b-lg",children:(0,l.jsx)(he,{service:r,serviceId:r.id})})]})};function ye(e){return null!=e}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},be.apply(null,arguments)}const we={text:s.A,textarea:s.A,number:s.A,api:s.A,hidden:p,checkbox:k,select:N.A,colorpicker:C.A,list:B,palettes:W,authentication:Z,theme:ae,providers_list:()=>{const e=(0,n.c)(31),{crudState:t,dispatch:r}=(0,le.r)(),{providersRemaining:o,providersTotal:s}=(0,D.A)(),[l,c]=(0,a.useState)(s-o);let d,u,v;e[0]!==t.providers?(d=()=>{t.providers&&c(t.providers.length)},u=[t.providers],e[0]=t.providers,e[1]=d,e[2]=u):(d=e[1],u=e[2]),(0,a.useEffect)(d,u),e[3]!==t.unsavedProviders||e[4]!==t.unsavedServices.length?(v=e=>{const{next:r}=e,n=0!==t.unsavedServices.length||0!==t.unsavedProviders.length;return!(r.pathname.includes("settings")||!n)&&!window.confirm((0,j.__)("You have unsaved changes. Are you sure you want to leave?\n\nYour changes will be lost.","simplybook"))},e[3]=t.unsavedProviders,e[4]=t.unsavedServices.length,e[5]=v):v=e[5];const m=0!==t.unsavedServices.length||0!==t.unsavedProviders.length;let p,f;e[6]!==v||e[7]!==m?(p={shouldBlockFn:v,enableBeforeUnload:m},e[6]=v,e[7]=m,e[8]=p):p=e[8],(0,me.K)(p),e[9]!==r?(f=()=>{r({dispatchType:"createNewCanceled"}),r({dispatchType:"clearAllErrorsForItem",change:{item:{id:"new"}}})},e[9]=r,e[10]=f):f=e[10];const h=f;let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g={id:"new",name:"",email:"",phone:"",qty:1},e[11]=g):g=e[11];const y=g;let b;e[12]!==r?(b=()=>{r({dispatchType:"isCreatingNewChanged",change:{isCreatingNewProvider:!0}}),r({dispatchType:"unsavedChangesToProviders",change:{item:y}})},e[12]=r,e[13]=b):b=e[13];const w=b;if(!t.providers||t.isLoading){let t,r;return e[14]===Symbol.for("react.memo_cache_sentinel")?(t=i().createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e[14]=t):t=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(r=i().createElement("div",{className:"flex items-center justify-center p-8"},t,i().createElement("span",{className:"ms-2"},(0,j.__)("Loading service providers","simplybook"),"...")),e[15]=r):r=e[15],r}let x,_,E;return e[16]!==t.isLoading||e[17]!==t.providers||e[18]!==o?(x=!t.isLoading&&t.providers&&0===t.providers.length?i().createElement("div",{className:"text-center py-8 text-gray-500"},(0,j.__)("No service providers found.","simplybook")+(o>0?(0,j.__)('Click "Add Service Provider" to create your first service provider.',"simplybook"):"")):i().createElement("div",{className:"space-y-6"},t.providers?.filter(pe).map((e=>i().createElement(ue,{key:e.id,provider:e,providers:t.providers})))),e[16]=t.isLoading,e[17]=t.providers,e[18]=o,e[19]=x):x=e[19],e[20]!==t.isCreatingNewProvider||e[21]!==t.isSaving||e[22]!==w||e[23]!==h||e[24]!==l||e[25]!==o||e[26]!==s?(_=o>0&&i().createElement(i().Fragment,null,i().createElement("div",{className:"flex justify-between items-center mb-4"},i().createElement("div",{className:"flex items-center gap-3"},i().createElement(ve.A,{type:"button",className:"font-bold border-secondary bg-secondary text-white",onClick:t.isCreatingNewProvider?h:w,disabled:t.isSaving,btnVariant:"square"},i().createElement(oe.g,{icon:se.QLR,className:"w-4 h-4 me-2 text-white font-bold"}),t.isCreatingNewProvider?(0,j.__)("Cancel New Service Provider","simplybook"):(0,j.__)("Add Service Provider","simplybook"))),i().createElement("div",{className:"rounded-md px-2 py-1 text-tertiary font-bold bg-blue-100"},i().createElement("span",null,`Providers: ${l} / ${s}`))),t.isCreatingNewProvider&&i().createElement("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50"},i().createElement("h4",{className:"text-md font-medium mb-4"},(0,j.__)("Add New Service Provider","simplybook")),i().createElement(de,{providerId:"new",provider:y}))),e[20]=t.isCreatingNewProvider,e[21]=t.isSaving,e[22]=w,e[23]=h,e[24]=l,e[25]=o,e[26]=s,e[27]=_):_=e[27],e[28]!==x||e[29]!==_?(E=i().createElement("div",{className:"w-full"},x,_),e[28]=x,e[29]=_,e[30]=E):E=e[30],E},services_list:()=>{const e=(0,n.c)(29),{crudState:t,dispatch:r}=(0,le.r)();let a;e[0]!==t.unsavedProviders||e[1]!==t.unsavedServices.length?(a=e=>{const{next:r}=e,n=0!==t.unsavedServices.length||0!==t.unsavedProviders.length;return!(r.pathname.includes("settings")||!n)&&!window.confirm((0,j.__)("You have unsaved changes. Are you sure you want to leave?\n\nYour changes will be lost.","simplybook"))},e[0]=t.unsavedProviders,e[1]=t.unsavedServices.length,e[2]=a):a=e[2];const o=0!==t.unsavedServices.length||0!==t.unsavedProviders.length;let s,l;e[3]!==a||e[4]!==o?(s={shouldBlockFn:a,enableBeforeUnload:o},e[3]=a,e[4]=o,e[5]=s):s=e[5],(0,me.K)(s),e[6]!==r?(l=()=>{r({dispatchType:"createNewCanceled"}),r({dispatchType:"clearAllErrorsForItem",change:{item:{id:"new"}}})},e[6]=r,e[7]=l):l=e[7];const c=l;let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d={id:"new",name:"",duration:60},e[8]=d):d=e[8];const u=d;let v;e[9]!==r?(v=()=>{r({dispatchType:"isCreatingNewChanged",change:{isCreatingNewService:!0}}),r({dispatchType:"unsavedChangesToServices",change:{item:u}})},e[9]=r,e[10]=v):v=e[10];const m=v;if(!t.services||t.isLoading){let t,r;return e[11]===Symbol.for("react.memo_cache_sentinel")?(t=i().createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e[11]=t):t=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(r=i().createElement("div",{className:"flex items-center justify-center p-8"},t,i().createElement("span",{className:"ms-2"},(0,j.__)("Loading services","simplybook"),"...")),e[12]=r):r=e[12],r}let p;e[13]!==t.isLoading||e[14]!==t.services?(p=!t.isLoading&&t.services&&0===t.services.length?i().createElement("div",{className:"text-center py-8 text-gray-500"},(0,j.__)('No services found. Click "Add Service" to create your first service.',"simplybook")):i().createElement("div",{className:"space-y-6"},t.services?.filter(ye).map((e=>i().createElement(ge,{key:e.id,service:e,services:t.services})))),e[13]=t.isLoading,e[14]=t.services,e[15]=p):p=e[15];const f=t.isCreatingNewProvider?c:m;let h,g,y,b,w;return e[16]===Symbol.for("react.memo_cache_sentinel")?(h=i().createElement(oe.g,{icon:se.QLR,className:"w-4 h-4 me-2 text-white font-bold"}),e[16]=h):h=e[16],e[17]!==t.isCreatingNewProvider?(g=t.isCreatingNewProvider?(0,j.__)("Cancel New Service","simplybook"):(0,j.__)("Add Service","simplybook"),e[17]=t.isCreatingNewProvider,e[18]=g):g=e[18],e[19]!==t.isSaving||e[20]!==f||e[21]!==g?(y=i().createElement("div",{className:"flex justify-between items-center mb-4"},i().createElement("div",{className:"flex items-center gap-3"},i().createElement(ve.A,{type:"button",className:"font-bold !border-secondary bg-secondary text-white",onClick:f,disabled:t.isSaving,btnVariant:"square"},h,g))),e[19]=t.isSaving,e[20]=f,e[21]=g,e[22]=y):y=e[22],e[23]!==t.isCreatingNewService?(b=t.isCreatingNewService&&i().createElement("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50"},i().createElement("h4",{className:"text-md font-medium mb-4"},(0,j.__)("Add New Service","simplybook")),i().createElement(he,{serviceId:"new",service:u})),e[23]=t.isCreatingNewService,e[24]=b):b=e[24],e[25]!==y||e[26]!==b||e[27]!==p?(w=i().createElement("div",{className:"w-full"},p,y,b),e[25]=y,e[26]=b,e[27]=p,e[28]=w):w=e[28],w}},xe=(0,a.memo)((({setting:e,control:t,setValue:r,getValues:n,reset:i,...s})=>{if(!1===e.visible)return React.createElement("input",{type:"hidden",defaultValue:e.value||e.default});const l=we[e.type],{saveSettings:c,setValue:d,getValue:u,settings:v}=(0,M.A)();if(!l)return React.createElement("div",{className:"w-full"},"Unknown field type:",e.type,", id:",e.id);const m={...e.required&&{validate:{required:e=>!!e||(0,j.__)("This field is required","simplybook")}},...e.validation?.regex&&{pattern:{value:new RegExp(e.validation.regex),message:e.validation.message||(0,j.__)("Invalid format","simplybook")}},...e.min&&{min:e.min},...e.max&&{max:e.max},...e.minLength&&{minLength:e.minLength},...e.maxLength&&{maxLength:e.maxLength},...e.validate&&{validate:e.validate}};let p=e.value||e.default;return"checkbox"===e.type&&(p="1"===p||!0===p||1===p),"self"===e?.control?React.createElement(S.A,null,React.createElement(l,be({className:e.inline_group?"inline-flex":"",setting:e,required:e.required,label:e.label,disabled:s.settingsIsUpdating||e.disabled,context:e.context,help:e.help,options:e.options,control:t,setValue:r,getValues:n,reset:i},s,we[e.type]))):React.createElement(S.A,null,React.createElement(o.xI,{name:e.id,control:t,rules:m,defaultValue:p,render:({field:t,fieldState:r})=>((0,a.useEffect)((()=>{u(e.id)!==t.value&&e.save_on_change&&t.value.length>0&&(console.log("saving field on change",e.id,t.value),(async t=>{d(e.id,t),e.mapping&&e.mapping.forEach((e=>{d(e,t)}))})(t.value))}),[t.value]),React.createElement(l,be({},s,{className:s.className,setting:e,fieldState:r,required:e.required,label:e.label,copyField:e.copy_field,disabled:s.settingsIsUpdating||e.disabled,context:e.context,tooltip:e.tooltip,help:e.help,options:e.options},t)))}))}));xe.displayName="FormField";const _e=xe,Ee=e=>{const t=(0,n.c)(13),{fields:r,control:a,getValues:o,setValue:s,reset:l}=e;let c,d;if(t[0]!==a||t[1]!==r||t[2]!==o||t[3]!==l||t[4]!==s){let e;t[6]!==a||t[7]!==o||t[8]!==l||t[9]!==s?(e=e=>i().createElement(_e,{className:"inline"==e?.style?"form-field-inline":"w-full",setting:e,key:e.id,control:a,setValue:s,getValues:o,reset:l}),t[6]=a,t[7]=o,t[8]=l,t[9]=s,t[10]=e):e=t[10],c=r.map(e),t[0]=a,t[1]=r,t[2]=o,t[3]=l,t[4]=s,t[5]=c}else c=t[5];return t[11]!==c?(d=i().createElement(i().Fragment,null,c),t[11]=c,t[12]=d):d=t[12],d}},3970:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(1728),a=r(4164);const i=e=>{const t=(0,n.c)(5),{className:r,children:i}=e;let o,s;return t[0]!==r?(o=(0,a.A)("left-column flex",r),t[0]=r,t[1]=o):o=t[1],t[2]!==i||t[3]!==o?(s=React.createElement("div",{className:o},i),t[2]=i,t[3]=o,t[4]=s):s=t[4],s};i.displayName="LeftColumn";const o=i},7047:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(1728),a=r(4164);const i=e=>{const t=(0,n.c)(6),{className:r,style:i,children:o}=e;let s,l;return t[0]!==r?(s=(0,a.A)("right-column w-full flex",r),t[0]=r,t[1]=s):s=t[1],t[2]!==o||t[3]!==i||t[4]!==s?(l=React.createElement("div",{className:s,style:i},o),t[2]=o,t[3]=i,t[4]=s,t[5]=l):l=t[5],l};i.displayName="RightColumn";const o=i},7983:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(2166),a=r(9785),i=r(8846),o=r(332),s=r(7723),l=r(1730),c=r(9815),d=r(1609),u=r(296),v=r(4576),m=r(7097);const p=({path:e,title:t,subtitle:r,rightColumn:p,bottomText:f,primaryButton:h={label:(0,s.__)("Next","simplybook")},secondaryButton:g=null,customHtml:y=null,syncFieldConfig:b,onSubmitError:w=null})=>{const{getURLForStep:x,getCurrentStepId:_,getCurrentStep:E,updateData:k,data:N,defaultData:S,isLastStep:j,apiError:C,setApiError:A,onboardingCompleted:P,setOnboardingCompleted:O}=(0,i.A)(),T=(0,n.Z)(),{watch:R,handleSubmit:q,control:F,setValue:I,getValues:L,reset:V,trigger:U,formState:{isDirty:D,errors:H,isValid:B,isValidating:M,touchedFields:$}}=(0,a.mN)({defaultValues:S,values:N,mode:"onTouched"}),{getValue:K}=(0,l.A)(),[Q,z]=(0,d.useState)(""),W=E(e),[G,J]=(_(e),(0,d.useState)(!B)),Y=new v.A;(0,d.useEffect)((()=>{J(!B)}),[B]),b&&((e,t,r)=>{let n=L(e);$[e]?r(n):void 0!==t&&I(e,t,{shouldValidate:!0,shouldTouch:!0})})(b.key,b.value,b.setValue);const{mutate:Z,isPending:X}=(0,m.n)({mutationFn:async(t,r="primary")=>{A(null),J(!0);let n={...t};if("primary"===r&&h.modifyData?n=h.modifyData(n):"secondary"===r&&g.modifyData&&(n=g.modifyData(n)),W.beforeSubmit)try{if(!1===await W.beforeSubmit(n))return w?.(),void J(!1)}catch(e){return w?.(),J(!1),void console.error("Submission cancelled:",e)}await k(n),J(!1),"primary"===r&&h.navigateTo?T({to:h.navigateTo}):"secondary"===r&&g.navigateTo?T({to:g.navigateTo}):j(e)?T({to:"/"}):E(e).id<=1&&P?T({to:x(2)}):T({to:x(_(e)+1)})}});return(0,d.useEffect)((()=>{let e=K("company_name");e&&e.length>0&&z(e)}),[K("company_name")]),React.createElement(React.Fragment,null,React.createElement("div",{className:`w-full col-span-4 col-start-3 ${W.fields?.length?"my-12":""} flex flex-col text-black`},React.createElement("div",{className:"flex flex-col"},React.createElement("form",{className:"flex flex-wrap justify-between"},React.createElement(c.A,{fields:W.fields,control:F}),y,React.createElement(o.A,{className:"w-full mt-4",showLoader:M||X,btnVariant:"secondary",label:h.label??(0,s.__)("Next","simplybook"),context:f,button:{disabled:h.disabled||G||X,onClick:q((e=>Z(e,"primary")))}}),g&&React.createElement(o.A,{btnVariant:"tertiary",label:g.label,button:{disabled:G,onClick:q((e=>Z(e,"secondary")))}}))),C&&React.createElement(u.A,{errorHeading:(0,s.__)("Something went wrong","simplybook"),error:C,resolve:{callback:async()=>{try{await Y.setRoute("onboarding/retry_onboarding").setPayload({user_confirmed:!0}).post()}catch(e){return A(e.message||(0,s.__)("An error occurred while restarting the onboarding.","simplybook")),!1}O(!1),A(""),await T({to:x(1)})},label:(0,s.__)("Or restart the onboarding","simplybook")}})),React.createElement("div",{className:"col-span-4 col-start-7 row-span-2 my-12"},p))};p.displayName="OnboardingStep";const f=p},8846:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(1728),a=r(7723),i=r(7665),o=r(9270),s=r(7097),l=r(1730),c=r(1609),d=r(4576),u=r(9592);const v=()=>{const e=(0,n.c)(8),[t,r]=(0,c.useState)(""),v=(0,i.jE)(),{settings:m}=(0,l.A)(),p=new d.A;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=async()=>{if(!window.grecaptcha?.enterprise)return"";try{return await(e=u.A2,new Promise(((t,r)=>{window.grecaptcha?.enterprise?window.grecaptcha.enterprise.ready((async()=>{try{const r=await window.grecaptcha.enterprise.execute(e,{action:"create_company"});t(r)}catch(e){r(e)}})):r(new Error("reCAPTCHA not loaded"))})))}catch(e){return r((0,a.__)("Captcha verification failed. Please try again.","simplybook")),!1}var e},e[0]=f):f=e[0];const h=f,g=[{id:1,path:"/onboarding/create-your-account",fields:[{id:"email",type:"text",label:(0,a.__)("Email address","simplybook"),required:!0,default:simplybook?.user_email||"",validation:{regex:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",message:(0,a.__)("Please enter a valid email address","simplybook")}},{required:!0,id:"terms-and-conditions",type:"checkbox",default:!0,label:(0,a.sprintf)((0,a.__)("I agree to the %sterms and conditions%s","simplybook"),'<a href="https://simplybook.me/terms-and-conditions" target="_blank">',"</a>")},{id:"marketing-consent",type:"checkbox",default:!0,label:(0,a.sprintf)((0,a.__)("I wish to receive communications about news and/or promotions from %sSimplyBook.me%s","simplybook"),'<a href="https://simplybook.me/en/policy#direct-marketing" target="_blank">',"</a>")}],beforeSubmit:async e=>{const t=await h();return!1!==t&&await(async(e,t)=>{try{await p.setRoute("onboarding/create_account").setPayload({...e,captcha_token:t}).post()}catch(e){return r(e.message||(0,a.__)("An error occurred while registering.","simplybook")),!1}return r(""),!0})(e,t)}},{id:2,path:"/onboarding/style-widget",beforeSubmit:async e=>{try{await p.setRoute("onboarding/save_widget_style").setPayload({primary_color:e.primary_color,secondary_color:e.secondary_color,active_color:e.active_color}).post()}catch(e){return r(e.message||(0,a.__)("An error occurred while saving the styles.","simplybook")),!1}try{await p.setRoute("onboarding/generate_pages").setPayload({generate:!0}).post()}catch(e){}try{await p.setRoute("onboarding/finish_onboarding").setPayload({finish:!0}).post()}catch(e){return r(e.message||(0,a.__)("An error occurred while finishing the onboarding.","simplybook")),!1}return S(!0),r(""),!0},fields:[]}],y={};g.forEach((e=>{e.fields.forEach((e=>{y[e.id]=void 0!==e.default?e.default:""}))}));const b={};let w;m?.forEach((e=>{e.id in y&&(b[e.id]=e.value)})),e[1]===Symbol.for("react.memo_cache_sentinel")?(w=["onboarding_data"],e[1]=w):w=e[1];const x=(0,o.I)({queryKey:w,initialData:{...y,...b,onboardingCompleted:simplybook.is_onboarding_completed},staleTime:3e5});let _;e[2]!==v?(_={mutationFn:async e=>{v.setQueryData(["onboarding_data"],(t=>({...t,...e}))),v.invalidateQueries(["onboarding_data"])}},e[2]=v,e[3]=_):_=e[3];const{mutate:E}=(0,s.n)(_);let k;e[4]!==v?(k={mutationFn:async e=>{v.setQueryData(["onboarding_data"],(t=>({...t,onboardingCompleted:e})))},onSuccess:()=>{v.invalidateQueries(["onboarding_data"])}},e[4]=v,e[5]=k):k=e[5];const{mutate:N}=(0,s.n)(k),S=N;let j;return e[6]!==S?(j=e=>S(e),e[6]=S,e[7]=j):j=e[7],{steps:g,data:x.data,defaultData:y,updateData:E,getCurrentStepId:e=>g.find((t=>t.path===e))?.id,getCurrentStep:e=>g.find((t=>t.path===e)),getURLForStep:e=>g[e-1]?.path,isLastStep:e=>g.length===g.find((t=>t.path===e))?.id,onboardingCompleted:x.data?.onboardingCompleted||!1,setOnboardingCompleted:j,apiError:t,setApiError:r}}},1730:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1728),a=r(7665),i=r(9270),o=r(7097),s=r(4576);const l=()=>{const e=(0,n.c)(21),t=(0,a.jE)();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new s.A,e[0]=r):r=e[0];const l=r;let d,u,v;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=["setting_fields"],u=()=>l.setRoute("settings/get").setPayload({withValues:!0}).post(),e[1]=d,e[2]=u):(d=e[1],u=e[2]),e[3]===Symbol.for("react.memo_cache_sentinel")?(v={queryKey:d,queryFn:u,staleTime:3e5,initialData:{data:window.simplybook?.settings_fields},retry:0,select:c},e[3]=v):v=e[3];const m=(0,i.I)(v);let p,f;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=async e=>await l.setRoute("settings/save").setPayload(e).post(),e[4]=p):p=e[4],e[5]!==t?(f={mutationFn:p,onSuccess:e=>{if("success"!==e?.status)throw e;t.setQueryData(["setting_fields"],(t=>e?.data?[...e?.data]:[])),t.invalidateQueries({queryKey:["setting_fields"]})}},e[5]=t,e[6]=f):f=e[6];const{mutateAsync:h}=(0,o.n)(f);let g;e[7]!==m?.data?(g=e=>m?.data.find((t=>t.id===e))?.value,e[7]=m?.data,e[8]=g):g=e[8];const y=g;let b;e[9]!==m?.data||e[10]!==h?(b=(e,t)=>{const r=m?.data?.map((r=>r.id===e?{...r,value:t}:r));r&&h(r)},e[9]=m?.data,e[10]=h,e[11]=b):b=e[11];const w=b,x=m?.data,_=m?.isLoading;let E,k;return e[12]!==t?(E=()=>t.invalidateQueries({queryKey:["setting_fields"]}),e[12]=t,e[13]=E):E=e[13],e[14]!==y||e[15]!==h||e[16]!==w||e[17]!==E||e[18]!==x||e[19]!==_?(k={settings:x,saveSettings:h,getValue:y,setValue:w,isSavingSettings:_,invalidateSettings:E},e[14]=y,e[15]=h,e[16]=w,e[17]=E,e[18]=x,e[19]=_,e[20]=k):k=e[20],k};function c(e){return e?.data??e}},3775:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(1728),a=r(7665),i=r(9270),o=r(4576);const s=()=>{const e=(0,n.c)(9),t=(0,a.jE)();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new o.A,e[0]=r):r=e[0];const s=r;let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l={queryKey:["get_widget"],queryFn:()=>s.setRoute("get_widget").get(),staleTime:3e5,retry:0,enabled:!1},e[1]=l):l=e[1];const{data:c,refetch:d}=(0,i.I)(l);let u;e[2]!==t||e[3]!==d?(u=async()=>{t.invalidateQueries({queryKey:["get_widget"]}).then((function(e){return d()}))},e[2]=t,e[3]=d,e[4]=u):u=e[4];const v=u;let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=async e=>await s.setRoute("get_preview_widget").setPayload(e).post(),e[5]=m):m=e[5];const p=m,f=c?.data?.widget;let h;return e[6]!==v||e[7]!==f?(h={widgetScript:f,invalidateAndRefetchWidgetScript:v,createPreviewWidget:p},e[6]=v,e[7]=f,e[8]=h):h=e[8],h}},2167:(e,t,r)=>{r.r(t),r.d(t,{Route:()=>g});var n=r(6037),a=r(7723),i=r(4705),o=r(3970),s=r(7047),l=r(1609),c=r(7581),d=r(8846),u=r(1728),v=r(9270),m=r(4576);var p=r(7983),f=r(1577);const h="/onboarding/style-widget",g=(0,n.uV)(h)({component:()=>{const{colors:e,isLoading:t}=(()=>{const e=(0,u.c)(9);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=new m.A,e[0]=t):t=e[0];const r=t;let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n={queryKey:["theme_colors"],queryFn:()=>r.setRoute("theme_colors").get(),refetchOnMount:"always"},e[1]=n):n=e[1];const{data:a,isLoading:i,error:o}=(0,v.I)(n);let s,l;return e[2]!==i||e[3]!==a?.data?.colors?(s=i?null:a?.data?.colors||simplybook.fallback_colors,e[2]=i,e[3]=a?.data?.colors,e[4]=s):s=e[4],e[5]!==o||e[6]!==i||e[7]!==s?(l={colors:s,isLoading:i,error:o},e[5]=o,e[6]=i,e[7]=s,e[8]=l):l=e[8],l})(),{onboardingCompleted:r}=(0,d.A)(),[n,g]=(0,l.useState)(null),[y,b]=(0,l.useState)(null),[w,x]=(0,l.useState)(null);(0,l.useEffect)((()=>{e&&(g(e.primary),b(e.secondary),x(e.active))}),[e]);const _=!t&&e;return React.createElement(React.Fragment,null,React.createElement(o.A,{className:"items-center flex-col flex-wrap justify-start xl:col-span-5 col-span-12 xl:col-start-2 mt-26"},React.createElement("div",{className:"text-center"},React.createElement("h2",{className:"mt-2 text-lg font-light text-black"},(0,a.__)("Select your company colors","simplybook")),React.createElement("h1",{className:"text-4xl font-semibold text-black mb-4"},(0,a.__)("Next Step: Finish","simplybook"))),React.createElement("div",{className:"flex flex-wrap justify-center mt-12 mb-12"},_?React.createElement(React.Fragment,null,React.createElement(c.A,{className:"me-4",label:(0,a.__)("Primary","simplybook"),setting:{value:n,default:e.primary,disabled:!1},setColorOnClose:e=>{g(e)}}),React.createElement(c.A,{className:"me-4",label:(0,a.__)("Secondary","simplybook"),setting:{value:y,default:e.secondary,disabled:!1},setColorOnClose:e=>{b(e)}}),React.createElement(c.A,{label:(0,a.__)("Active","simplybook"),setting:{value:w,default:e.active,disabled:!1},setColorOnClose:e=>{x(e)}})):React.createElement("div",{className:"flex items-center justify-center py-8"},React.createElement(f.A,{name:"spinner",className:"animate-spin me-2"}),React.createElement("span",null,(0,a.__)("Loading theme colors...","simplybook")))),React.createElement(p.A,{path:h,primaryButton:{disabled:!r,label:(0,a.__)("Next step","simplybook"),modifyData:e=>(e.primary_color=n,e.secondary_color=y,e.active_color=w,e)}})),React.createElement(s.A,{className:"items-center flex-col flex-wrap justify-center xl:col-span-5 col-span-12 relative w-full"},React.createElement(i.A,{primary:n,secondary:y,active:w,onboardingCompleted:r})))}})}}]);